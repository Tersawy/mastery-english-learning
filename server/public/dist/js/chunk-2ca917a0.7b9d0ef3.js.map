{"version":3,"sources":["webpack:///./src/components/question/speech.vue?1999","webpack:///./src/components/Recorder.vue?22f7","webpack:///src/components/Recorder.vue","webpack:///./src/components/Recorder.vue?1e00","webpack:///./src/components/Recorder.vue","webpack:///src/components/question/speech.vue","webpack:///./src/components/question/speech.vue?4e86","webpack:///./src/components/question/speech.vue","webpack:///./node_modules/recorder-js/lib/index.js","webpack:///./node_modules/inline-worker/index.js","webpack:///./node_modules/recorder-js/lib/microphone.js","webpack:///./node_modules/recorder-js/index.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","class","textClass","_v","_s","question","text","_t","attrs","disabled","on","handleRecorder","answer","_e","staticRenderFns","staticStyle","isRecording","stopRecording","startRecording","component","Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_microphone","_microphone2","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","TypeError","defaultConfig","nFrequencyBars","onAnalysed","Recorder","audioContext","config","arguments","undefined","assign","audioInput","realAudioInput","inputPoint","audioRecorder","rafID","analyserContext","recIndex","stream","updateAnalysers","bind","_this","Promise","resolve","createGain","createMediaStreamSource","connect","analyserNode","createAnalyser","fftSize","zeroGain","gain","destination","_this2","reject","clear","record","_this3","stop","getBuffer","buffer","exportWAV","blob","requestAnimationFrame","freqByteData","Uint8Array","frequencyBinCount","getByteFrequencyData","data","Array","lastNonZero","datum","idx","Math","floor","lineTo","handler","download","filename","forceDownload","InlineWorker","func","self","functionBody","WORKER_ENABLED","toString","trim","match","global","Worker","URL","createObjectURL","Blob","type","postMessage","setTimeout","onmessage","module","_inlineWorker","_inlineWorker2","bufferLen","numChannels","mimeType","Microphone","source","recording","callbacks","context","node","createScriptProcessor","createJavaScriptNode","call","onaudioprocess","e","channel","push","inputBuffer","getChannelData","worker","command","recLength","recBuffers","sampleRate","init","initBuffers","buffers","mergeBuffers","interleaved","interleave","dataview","encodeWAV","audioBlob","result","Float32Array","offset","set","inputL","inputR","index","inputIndex","floatTo16BitPCM","output","input","s","max","min","setInt16","writeString","view","string","setUint8","charCodeAt","samples","ArrayBuffer","DataView","setUint32","setUint16","cb","pop","callback","Error","a","document","createElement","style","body","appendChild","url","window","href","click","revokeObjectURL","removeChild"],"mappings":"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","file":"js/chunk-2ca917a0.7b9d0ef3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"question question-speech flex-column align-items-start\"},[_c('div',{staticClass:\"w-100\"},[_c('div',{staticClass:\"d-flex w-100 align-items-center justify-content-between\"},[_c('span',[_c('span',{class:(\"question-text \" + (_vm.textClass || ''))},[_vm._v(_vm._s(_vm.question.text))]),_c('span',{staticClass:\"ml-3\"},[_vm._t(\"iconStatus\")],2)]),_c('recorder',{attrs:{\"disabled\":_vm.disabled},on:{\"input\":_vm.handleRecorder}})],1),(_vm.question.isCorrected)?_c('div',[_c('strong',{staticClass:\"text-muted\"},[_vm._v(\"Your answer is: \")]),(_vm.question.isTrue)?_c('span',{staticClass:\"bg-success-light w-fit-content px-2 rounded-lg\"},[_vm._v(_vm._s(_vm.question.answer))]):_c('span',{staticClass:\"bg-danger-light w-fit-content text-white px-2 rounded-lg\"},[_vm._v(_vm._s(_vm.question.answer))])]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"text-right\"},[(_vm.disabled)?_c('b-iconstack',{staticStyle:{\"cursor\":\"not-allowed\"},attrs:{\"font-scale\":\"2\"}},[_c('b-icon',{attrs:{\"stacked\":\"\",\"icon\":\"mic\",\"scale\":\"0.75\",\"variant\":\"success\"}}),_c('b-icon',{attrs:{\"stacked\":\"\",\"icon\":\"slash-circle\",\"variant\":\"danger\"}})],1):_c('div',{staticStyle:{\"font-size\":\"2rem\"}},[(!_vm.isRecording)?_c('b-icon',{staticClass:\"bg-transparent rounded-circle p-2 c-pointer\",attrs:{\"icon\":\"mic\",\"scale\":\"1.5\",\"variant\":\"success\"},on:{\"click\":_vm.startRecording}}):_c('b-icon',{staticClass:\"bg-danger rounded-circle p-2 c-pointer\",attrs:{\"icon\":\"mic-fill\",\"scale\":\"1.5\",\"variant\":\"white\"},on:{\"click\":_vm.stopRecording}},[_vm._v(\"Stop\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"text-right\">\n\t\t<b-iconstack font-scale=\"2\" v-if=\"disabled\" style=\"cursor: not-allowed\">\n\t\t\t<b-icon stacked icon=\"mic\" scale=\"0.75\" variant=\"success\"></b-icon>\n\t\t\t<b-icon stacked icon=\"slash-circle\" variant=\"danger\"></b-icon>\n\t\t</b-iconstack>\n\t\t<div style=\"font-size: 2rem\" v-else>\n\t\t\t<b-icon icon=\"mic\" scale=\"1.5\" variant=\"success\" class=\"bg-transparent rounded-circle p-2 c-pointer\" v-if=\"!isRecording\" @click=\"startRecording\"></b-icon>\n\t\t\t<b-icon icon=\"mic-fill\" scale=\"1.5\" variant=\"white\" class=\"bg-danger rounded-circle p-2 c-pointer\" v-else @click=\"stopRecording\">Stop</b-icon>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport Recorder from \"recorder-js\";\n\n\texport default {\n\t\tprops: [\"disabled\"],\n\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tisRecording: false,\n\t\t\t\trecorder: {},\n\t\t\t\tgumStream: {}\n\t\t\t};\n\t\t},\n\t\tmounted() {},\n\t\tmethods: {\n\t\t\tasync startRecording() {\n\t\t\t\tconst audioContext = new (window.AudioContext || window.webkitAudioContext)();\n\n\t\t\t\tthis.recorder = new Recorder(audioContext);\n\n\t\t\t\ttry {\n\t\t\t\t\tlet stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n\n\t\t\t\t\tthis.recorder.init(stream);\n\n\t\t\t\t\tthis.gumStream = stream;\n\n\t\t\t\t\tawait this.recorder.start();\n\n\t\t\t\t\tthis.isRecording = true;\n\t\t\t\t} catch (err) {\n\t\t\t\t\tthis.isRecording = false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tstopRecording() {\n\t\t\t\tthis.isRecording = false;\n\n\t\t\t\tthis.gumStream.getAudioTracks()[0].stop();\n\n\t\t\t\tthis.recorder.stop().then(({ blob }) => {\n\t\t\t\t\tthis.isRecording = false;\n\n\t\t\t\t\tthis.$emit(\"input\", blob);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t// methods: {\n\t\t// \tstartRecording() {\n\t\t// \t\tconsole.log(\"recordButton clicked\");\n\n\t\t// \t\t/*\n\t\t//       Simple constraints object, for more advanced audio features see\n\t\t//       https://addpipe.com/blog/audio-constraints-getusermedia/\n\t\t//     */\n\t\t// \t\tvar constraints = { audio: true, video: false };\n\n\t\t// \t\t/*\n\t\t//       Disable the record button until we get a success or fail from getUserMedia()\n\t\t//     */\n\n\t\t// \t\tthis.isRecording = true;\n\n\t\t// \t\t/*\n\t\t//       We're using the standard promise based getUserMedia()\n\t\t//       https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n\t\t//     */\n\n\t\t// \t\tnavigator.mediaDevices\n\t\t// \t\t\t.getUserMedia(constraints)\n\t\t// \t\t\t.then((stream) => {\n\t\t// \t\t\t\tconsole.log(\"getUserMedia() success, stream created, initializing Recorder.js ...\");\n\n\t\t// \t\t\t\t/*\n\t\t//           create an audio context after getUserMedia is called\n\t\t//           sampleRate might change after getUserMedia is called, like it does on macOS when recording through AirPods\n\t\t//           the sampleRate defaults to the one set in your OS for your playback device\n\t\t//         */\n\t\t// \t\t\t\tthis.audioContext = new (window.AudioContext || window.webkitAudioContext)();\n\n\t\t// \t\t\t\t//update the format\n\t\t// \t\t\t\t// document.getElementById(\"formats\").innerHTML = \"Format: 1 channel pcm @ \" + audioContext.sampleRate / 1000 + \"kHz\";\n\n\t\t// \t\t\t\t/*  assign to gumStream for later use  */\n\t\t// \t\t\t\tthis.gumStream = stream;\n\n\t\t// \t\t\t\t/* use the stream */\n\t\t// \t\t\t\tthis.input = this.audioContext.createMediaStreamSource(stream);\n\n\t\t// \t\t\t\t/*\n\t\t//           Create the Recorder object and configure to record mono sound (1 channel)\n\t\t//           Recording 2 channels  will double the file size\n\t\t//         */\n\t\t// \t\t\t\tthis.rec = new Recorder(this.input, { numChannels: 1 });\n\n\t\t// \t\t\t\t//start the recording process\n\t\t// \t\t\t\tthis.rec.record();\n\n\t\t// \t\t\t\tconsole.log(\"Recording started\");\n\t\t// \t\t\t})\n\t\t// \t\t\t.catch((err) => {\n\t\t// \t\t\t\tconsole.log(err);\n\t\t// \t\t\t\t//enable the record button if getUserMedia() fails\n\t\t// \t\t\t\tthis.isRecording = false;\n\t\t// \t\t\t});\n\t\t// \t},\n\t\t// \tstopRecording() {\n\t\t// \t\tconsole.log(\"stopButton clicked\");\n\n\t\t// \t\t//disable the stop button, enable the record too allow for new recordings\n\t\t// \t\tthis.isRecording = false;\n\n\t\t// \t\t//reset button just in case the recording is stopped while paused\n\t\t// \t\t// pauseButton.innerHTML=\"Pause\";\n\t\t// \t\t//tell the recorder to stop the recording\n\t\t// \t\tthis.rec.stop();\n\n\t\t// \t\t//stop microphone access\n\t\t// \t\tthis.gumStream.getAudioTracks()[0].stop();\n\n\t\t// \t\tconsole.log(this.rec);\n\t\t// \t\t//create the wav blob and pass it on to createDownloadLink\n\t\t// \t\tthis.rec.exportWAV((blob) => {\n\t\t// \t\t\tvar url = URL.createObjectURL(blob);\n\t\t// \t\t\tvar au = document.createElement(\"audio\");\n\t\t// \t\t\tvar li = document.createElement(\"li\");\n\t\t// \t\t\tvar link = document.createElement(\"a\");\n\n\t\t// \t\t\t//name of .wav file to use during upload and download (without extendion)\n\t\t// \t\t\tvar filename = new Date().toISOString();\n\n\t\t// \t\t\t//add controls to the <audio> element\n\t\t// \t\t\tau.controls = true;\n\t\t// \t\t\tau.src = url;\n\n\t\t// \t\t\t//save to disk link\n\t\t// \t\t\tlink.href = url;\n\t\t// \t\t\tlink.download = filename + \".wav\"; //download forces the browser to donwload the file using the  filename\n\t\t// \t\t\tlink.innerHTML = \"Save to disk\";\n\n\t\t// \t\t\t//add the new audio element to li\n\t\t// \t\t\tli.appendChild(au);\n\n\t\t// \t\t\t//add the filename to the li\n\t\t// \t\t\tli.appendChild(document.createTextNode(filename + \".wav \"));\n\n\t\t// \t\t\t//add the save to disk link to li\n\t\t// \t\t\tli.appendChild(link);\n\n\t\t// \t\t\t//upload link\n\t\t// \t\t\t// var upload = document.createElement(\"a\");\n\t\t// \t\t\t// upload.href = \"#\";\n\t\t// \t\t\t// upload.innerHTML = \"Upload\";\n\t\t// \t\t\t// upload.addEventListener(\"click\", function (event) {\n\t\t// \t\t\t// \tvar xhr = new XMLHttpRequest();\n\t\t// \t\t\t// \txhr.onload = function (e) {\n\t\t// \t\t\t// \t\tif (this.readyState === 4) {\n\t\t// \t\t\t// \t\t\tconsole.log(\"Server returned: \", e.target.responseText);\n\t\t// \t\t\t// \t\t}\n\t\t// \t\t\t// \t};\n\t\t// \t\t\t// \tvar fd = new FormData();\n\t\t// \t\t\t// \tfd.append(\"audio_data\", blob, filename);\n\t\t// \t\t\t// \txhr.open(\"POST\", \"upload.php\", true);\n\t\t// \t\t\t// \txhr.send(fd);\n\t\t// \t\t\t// });\n\t\t// \t\t\tli.appendChild(document.createTextNode(\" \")); //add a space in between\n\t\t// \t\t\tli.appendChild(upload); //add the upload link to li\n\n\t\t// \t\t\t//add the li element to the ol\n\t\t// \t\t\tconsole.log(li);\n\t\t// \t\t\trecordingsList.appendChild(li);\n\t\t// \t\t});\n\t\t// \t},\n\t\t// \tcreateDownloadLink(blob) {\n\t\t// \t\tconsole.log(blob);\n\t\t// \t\tvar url = URL.createObjectURL(blob);\n\t\t// \t\tvar au = document.createElement(\"audio\");\n\t\t// \t\tvar li = document.createElement(\"li\");\n\t\t// \t\tvar link = document.createElement(\"a\");\n\n\t\t// \t\t//name of .wav file to use during upload and download (without extendion)\n\t\t// \t\tvar filename = new Date().toISOString();\n\n\t\t// \t\t//add controls to the <audio> element\n\t\t// \t\tau.controls = true;\n\t\t// \t\tau.src = url;\n\n\t\t// \t\t//save to disk link\n\t\t// \t\tlink.href = url;\n\t\t// \t\tlink.download = filename + \".wav\"; //download forces the browser to donwload the file using the  filename\n\t\t// \t\tlink.innerHTML = \"Save to disk\";\n\n\t\t// \t\t//add the new audio element to li\n\t\t// \t\tli.appendChild(au);\n\n\t\t// \t\t//add the filename to the li\n\t\t// \t\tli.appendChild(document.createTextNode(filename + \".wav \"));\n\n\t\t// \t\t//add the save to disk link to li\n\t\t// \t\tli.appendChild(link);\n\n\t\t// \t\t//upload link\n\t\t// \t\t// var upload = document.createElement(\"a\");\n\t\t// \t\t// upload.href = \"#\";\n\t\t// \t\t// upload.innerHTML = \"Upload\";\n\t\t// \t\t// upload.addEventListener(\"click\", function (event) {\n\t\t// \t\t// \tvar xhr = new XMLHttpRequest();\n\t\t// \t\t// \txhr.onload = function (e) {\n\t\t// \t\t// \t\tif (this.readyState === 4) {\n\t\t// \t\t// \t\t\tconsole.log(\"Server returned: \", e.target.responseText);\n\t\t// \t\t// \t\t}\n\t\t// \t\t// \t};\n\t\t// \t\t// \tvar fd = new FormData();\n\t\t// \t\t// \tfd.append(\"audio_data\", blob, filename);\n\t\t// \t\t// \txhr.open(\"POST\", \"upload.php\", true);\n\t\t// \t\t// \txhr.send(fd);\n\t\t// \t\t// });\n\t\t// \t\tli.appendChild(document.createTextNode(\" \")); //add a space in between\n\t\t// \t\tli.appendChild(upload); //add the upload link to li\n\n\t\t// \t\t//add the li element to the ol\n\t\t// \t\tconsole.log(li);\n\t\t// \t\trecordingsList.appendChild(li);\n\t\t// \t}\n\t\t// }\n\t};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Recorder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Recorder.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Recorder.vue?vue&type=template&id=4967102a&scoped=true&\"\nimport script from \"./Recorder.vue?vue&type=script&lang=js&\"\nexport * from \"./Recorder.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4967102a\",\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div class=\"question question-speech flex-column align-items-start\">\n\t\t<div class=\"w-100\">\n\t\t\t<div class=\"d-flex w-100 align-items-center justify-content-between\">\n\t\t\t\t<span>\n\t\t\t\t\t<span :class=\"`question-text ${textClass || ''}`\">{{ question.text }}</span>\n\t\t\t\t\t<span class=\"ml-3\">\n\t\t\t\t\t\t<slot name=\"iconStatus\"></slot>\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t<recorder :disabled=\"disabled\" @input=\"handleRecorder\" />\n\t\t\t</div>\n\t\t\t<div v-if=\"question.isCorrected\">\n\t\t\t\t<strong class=\"text-muted\">Your answer is: </strong>\n\t\t\t\t<span v-if=\"question.isTrue\" class=\"bg-success-light w-fit-content px-2 rounded-lg\">{{ question.answer }}</span>\n\t\t\t\t<span v-else class=\"bg-danger-light w-fit-content text-white px-2 rounded-lg\">{{ question.answer }}</span>\n\t\t\t</div>\n\t\t\t<!-- \n\t\t<audio v-if=\"audioSrc && !question.isAnswered\" class=\"mt-3 w-100\" controls :src=\"audioSrc\"></audio> -->\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport Recorder from \"@/components/Recorder.vue\";\n\n\texport default {\n\t\tprops: [\"question\", \"text-class\", \"disabled\"],\n\t\tcomponents: { Recorder },\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\taudioSrc: null\n\t\t\t};\n\t\t},\n\t\tmethods: {\n\t\t\thandleRecorder(blob) {\n\t\t\t\tif (this.disabled) return;\n\n\t\t\t\tthis.audioSrc = URL.createObjectURL(blob);\n\n\t\t\t\tthis.$emit(\"input\", blob);\n\t\t\t}\n\t\t}\n\t};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./speech.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./speech.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./speech.vue?vue&type=template&id=6a8ecb59&\"\nimport script from \"./speech.vue?vue&type=script&lang=js&\"\nexport * from \"./speech.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _microphone = require('./microphone');\n\nvar _microphone2 = _interopRequireDefault(_microphone);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar defaultConfig = {\n  nFrequencyBars: 255,\n  onAnalysed: null\n};\n\nvar Recorder = function () {\n  function Recorder(audioContext) {\n    var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Recorder);\n\n    this.config = Object.assign({}, defaultConfig, config);\n\n    this.audioContext = audioContext;\n    this.audioInput = null;\n    this.realAudioInput = null;\n    this.inputPoint = null;\n    this.audioRecorder = null;\n    this.rafID = null;\n    this.analyserContext = null;\n    this.recIndex = 0;\n    this.stream = null;\n\n    this.updateAnalysers = this.updateAnalysers.bind(this);\n  }\n\n  _createClass(Recorder, [{\n    key: 'init',\n    value: function init(stream) {\n      var _this = this;\n\n      return new Promise(function (resolve) {\n        _this.inputPoint = _this.audioContext.createGain();\n\n        _this.stream = stream;\n\n        _this.realAudioInput = _this.audioContext.createMediaStreamSource(stream);\n        _this.audioInput = _this.realAudioInput;\n        _this.audioInput.connect(_this.inputPoint);\n\n        _this.analyserNode = _this.audioContext.createAnalyser();\n        _this.analyserNode.fftSize = 2048;\n        _this.inputPoint.connect(_this.analyserNode);\n\n        _this.audioRecorder = new _microphone2.default(_this.inputPoint);\n\n        var zeroGain = _this.audioContext.createGain();\n        zeroGain.gain.value = 0.0;\n\n        _this.inputPoint.connect(zeroGain);\n        zeroGain.connect(_this.audioContext.destination);\n\n        _this.updateAnalysers();\n\n        resolve();\n      });\n    }\n  }, {\n    key: 'start',\n    value: function start() {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        if (!_this2.audioRecorder) {\n          reject('Not currently recording');\n          return;\n        }\n\n        _this2.audioRecorder.clear();\n        _this2.audioRecorder.record();\n\n        resolve(_this2.stream);\n      });\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      var _this3 = this;\n\n      return new Promise(function (resolve) {\n        _this3.audioRecorder.stop();\n\n        _this3.audioRecorder.getBuffer(function (buffer) {\n          _this3.audioRecorder.exportWAV(function (blob) {\n            return resolve({ buffer: buffer, blob: blob });\n          });\n        });\n      });\n    }\n  }, {\n    key: 'updateAnalysers',\n    value: function updateAnalysers() {\n      if (this.config.onAnalysed) {\n        requestAnimationFrame(this.updateAnalysers);\n\n        var freqByteData = new Uint8Array(this.analyserNode.frequencyBinCount);\n\n        this.analyserNode.getByteFrequencyData(freqByteData);\n\n        var data = new Array(255);\n        var lastNonZero = 0;\n        var datum = void 0;\n\n        for (var idx = 0; idx < 255; idx += 1) {\n          datum = Math.floor(freqByteData[idx]) - Math.floor(freqByteData[idx]) % 5;\n\n          if (datum !== 0) {\n            lastNonZero = idx;\n          }\n\n          data[idx] = datum;\n        }\n\n        this.config.onAnalysed({ data: data, lineTo: lastNonZero });\n      }\n    }\n  }, {\n    key: 'setOnAnalysed',\n    value: function setOnAnalysed(handler) {\n      this.config.onAnalysed = handler;\n    }\n  }]);\n\n  return Recorder;\n}();\n\nRecorder.download = function download(blob) {\n  var filename = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'audio';\n\n  _microphone2.default.forceDownload(blob, filename + '.wav');\n};\n\nexports.default = Recorder;","var WORKER_ENABLED = !!(global === global.window && global.URL && global.Blob && global.Worker);\n\nfunction InlineWorker(func, self) {\n  var _this = this;\n  var functionBody;\n\n  self = self || {};\n\n  if (WORKER_ENABLED) {\n    functionBody = func.toString().trim().match(\n      /^function\\s*\\w*\\s*\\([\\w\\s,]*\\)\\s*{([\\w\\W]*?)}$/\n    )[1];\n\n    return new global.Worker(global.URL.createObjectURL(\n      new global.Blob([ functionBody ], { type: \"text/javascript\" })\n    ));\n  }\n\n  function postMessage(data) {\n    setTimeout(function() {\n      _this.onmessage({ data: data });\n    }, 0);\n  }\n\n  this.self = self;\n  this.self.postMessage = postMessage;\n\n  setTimeout(func.bind(self, self), 0);\n}\n\nInlineWorker.prototype.postMessage = function postMessage(data) {\n  var _this = this;\n\n  setTimeout(function() {\n    _this.self.onmessage({ data: data });\n  }, 0);\n};\n\nmodule.exports = InlineWorker;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* eslint-disable */\n/**\n * License (MIT)\n *\n * Copyright Â© 2013 Matt Diamond\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included\n * in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n *\n */\n\n\nvar _inlineWorker = require('inline-worker');\n\nvar _inlineWorker2 = _interopRequireDefault(_inlineWorker);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar defaultConfig = {\n  bufferLen: 4096,\n  numChannels: 2,\n  mimeType: 'audio/wav'\n};\n\nvar Microphone = function () {\n  function Microphone(source, config) {\n    var _this = this;\n\n    _classCallCheck(this, Microphone);\n\n    this.config = Object.assign({}, defaultConfig, config);\n\n    this.recording = false;\n\n    this.callbacks = {\n      getBuffer: [],\n      exportWAV: []\n    };\n\n    this.context = source.context;\n    this.node = (this.context.createScriptProcessor || this.context.createJavaScriptNode).call(this.context, this.config.bufferLen, this.config.numChannels, this.config.numChannels);\n\n    this.node.onaudioprocess = function (e) {\n      if (!_this.recording) return;\n\n      var buffer = [];\n      for (var channel = 0; channel < _this.config.numChannels; channel++) {\n        buffer.push(e.inputBuffer.getChannelData(channel));\n      }\n      _this.worker.postMessage({\n        command: 'record',\n        buffer: buffer\n      });\n    };\n\n    source.connect(this.node);\n    this.node.connect(this.context.destination); //this should not be necessary\n\n    var self = {};\n    this.worker = new _inlineWorker2.default(function () {\n      var recLength = 0,\n          recBuffers = [],\n          sampleRate = void 0,\n          numChannels = void 0;\n\n      this.onmessage = function (e) {\n        switch (e.data.command) {\n          case 'init':\n            init(e.data.config);\n            break;\n          case 'record':\n            record(e.data.buffer);\n            break;\n          case 'exportWAV':\n            exportWAV(e.data.type);\n            break;\n          case 'getBuffer':\n            getBuffer();\n            break;\n          case 'clear':\n            clear();\n            break;\n        }\n      };\n\n      function init(config) {\n        sampleRate = config.sampleRate;\n        numChannels = config.numChannels;\n        initBuffers();\n      }\n\n      function record(inputBuffer) {\n        for (var channel = 0; channel < numChannels; channel++) {\n          recBuffers[channel].push(inputBuffer[channel]);\n        }\n        recLength += inputBuffer[0].length;\n      }\n\n      function exportWAV(type) {\n        var buffers = [];\n        for (var channel = 0; channel < numChannels; channel++) {\n          buffers.push(mergeBuffers(recBuffers[channel], recLength));\n        }\n        var interleaved = void 0;\n        if (numChannels === 2) {\n          interleaved = interleave(buffers[0], buffers[1]);\n        } else {\n          interleaved = buffers[0];\n        }\n        var dataview = encodeWAV(interleaved);\n        var audioBlob = new Blob([dataview], { type: type });\n\n        this.postMessage({ command: 'exportWAV', data: audioBlob });\n      }\n\n      function getBuffer() {\n        var buffers = [];\n        for (var channel = 0; channel < numChannels; channel++) {\n          buffers.push(mergeBuffers(recBuffers[channel], recLength));\n        }\n        this.postMessage({ command: 'getBuffer', data: buffers });\n      }\n\n      function clear() {\n        recLength = 0;\n        recBuffers = [];\n        initBuffers();\n      }\n\n      function initBuffers() {\n        for (var channel = 0; channel < numChannels; channel++) {\n          recBuffers[channel] = [];\n        }\n      }\n\n      function mergeBuffers(recBuffers, recLength) {\n        var result = new Float32Array(recLength);\n        var offset = 0;\n        for (var i = 0; i < recBuffers.length; i++) {\n          result.set(recBuffers[i], offset);\n          offset += recBuffers[i].length;\n        }\n        return result;\n      }\n\n      function interleave(inputL, inputR) {\n        var length = inputL.length + inputR.length;\n        var result = new Float32Array(length);\n\n        var index = 0,\n            inputIndex = 0;\n\n        while (index < length) {\n          result[index++] = inputL[inputIndex];\n          result[index++] = inputR[inputIndex];\n          inputIndex++;\n        }\n        return result;\n      }\n\n      function floatTo16BitPCM(output, offset, input) {\n        for (var i = 0; i < input.length; i++, offset += 2) {\n          var s = Math.max(-1, Math.min(1, input[i]));\n          output.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7FFF, true);\n        }\n      }\n\n      function writeString(view, offset, string) {\n        for (var i = 0; i < string.length; i += 1) {\n          view.setUint8(offset + i, string.charCodeAt(i));\n        }\n      }\n\n      function encodeWAV(samples) {\n        var buffer = new ArrayBuffer(44 + samples.length * 2);\n        var view = new DataView(buffer);\n\n        /* RIFF identifier */\n        writeString(view, 0, 'RIFF');\n        /* RIFF chunk length */\n        view.setUint32(4, 36 + samples.length * 2, true);\n        /* RIFF type */\n        writeString(view, 8, 'WAVE');\n        /* format chunk identifier */\n        writeString(view, 12, 'fmt ');\n        /* format chunk length */\n        view.setUint32(16, 16, true);\n        /* sample format (raw) */\n        view.setUint16(20, 1, true);\n        /* channel count */\n        view.setUint16(22, numChannels, true);\n        /* sample rate */\n        view.setUint32(24, sampleRate, true);\n        /* byte rate (sample rate * block align) */\n        view.setUint32(28, sampleRate * 4, true);\n        /* block align (channel count * bytes per sample) */\n        view.setUint16(32, numChannels * 2, true);\n        /* bits per sample */\n        view.setUint16(34, 16, true);\n        /* data chunk identifier */\n        writeString(view, 36, 'data');\n        /* data chunk length */\n        view.setUint32(40, samples.length * 2, true);\n\n        floatTo16BitPCM(view, 44, samples);\n\n        return view;\n      }\n    }, self);\n\n    this.worker.postMessage({\n      command: 'init',\n      config: {\n        sampleRate: this.context.sampleRate,\n        numChannels: this.config.numChannels\n      }\n    });\n\n    this.worker.onmessage = function (e) {\n      var cb = _this.callbacks[e.data.command].pop();\n      if (typeof cb === 'function') {\n        cb(e.data.data);\n      }\n    };\n  }\n\n  _createClass(Microphone, [{\n    key: 'record',\n    value: function record() {\n      this.recording = true;\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      this.recording = false;\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.worker.postMessage({ command: 'clear' });\n    }\n  }, {\n    key: 'getBuffer',\n    value: function getBuffer(cb) {\n      cb = cb || this.config.callback;\n\n      if (!cb) throw new Error('Callback not set');\n\n      this.callbacks.getBuffer.push(cb);\n\n      this.worker.postMessage({ command: 'getBuffer' });\n    }\n  }, {\n    key: 'exportWAV',\n    value: function exportWAV(cb, mimeType) {\n      mimeType = mimeType || this.config.mimeType;\n      cb = cb || this.config.callback;\n\n      if (!cb) throw new Error('Callback not set');\n\n      this.callbacks.exportWAV.push(cb);\n\n      this.worker.postMessage({\n        command: 'exportWAV',\n        type: mimeType\n      });\n    }\n  }]);\n\n  return Microphone;\n}();\n\nMicrophone.forceDownload = function forceDownload(blob, filename) {\n  var a = document.createElement('a');\n\n  a.style = 'display: none';\n  document.body.appendChild(a);\n\n  var url = window.URL.createObjectURL(blob);\n\n  a.href = url;\n  a.download = filename;\n  a.click();\n\n  window.URL.revokeObjectURL(url);\n\n  document.body.removeChild(a);\n};\n\nexports.default = Microphone;","module.exports = require('./lib/index.js');\n"],"sourceRoot":""}