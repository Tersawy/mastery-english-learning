(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ca917a0"],{"0dee":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"question question-speech flex-column align-items-start"},[n("div",{staticClass:"w-100"},[n("div",{staticClass:"d-flex w-100 align-items-center justify-content-between"},[n("span",[n("span",{class:"question-text "+(e.textClass||"")},[e._v(e._s(e.question.text))]),n("span",{staticClass:"ml-3"},[e._t("iconStatus")],2)]),e.question.isAnswered?e._e():n("recorder",{on:{input:e.handleRecorder}})],1),n("div",[n("strong",{staticClass:"text-muted"},[e._v("Your answer is: ")]),e.question.isTrue?n("span",{staticClass:"bg-success-light w-fit-content px-2 rounded-lg"},[e._v(e._s(e.question.answer))]):n("span",{staticClass:"bg-danger-light w-fit-content text-white px-2 rounded-lg"},[e._v(e._s(e.question.answer))])])])])},a=[],r=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-right",staticStyle:{"font-size":"2rem"}},[e.isRecording?n("b-icon",{staticClass:"bg-danger rounded-circle p-2 c-pointer",attrs:{icon:"mic-fill",scale:"1.5",variant:"white"},on:{click:e.stopRecording}},[e._v("Stop")]):n("b-icon",{staticClass:"bg-transparent rounded-circle p-2 c-pointer",attrs:{icon:"mic",scale:"1.5",variant:"success"},on:{click:e.startRecording}})],1)}),i=[],s=n("1da1"),c=(n("96cf"),n("c782")),u=n.n(c),l={data:function(){return{isRecording:!1,recorder:{},gumStream:{}}},mounted:function(){},methods:{startRecording:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new(window.AudioContext||window.webkitAudioContext),e.recorder=new u.a(n),t.prev=2,t.next=5,navigator.mediaDevices.getUserMedia({audio:!0});case 5:return o=t.sent,e.recorder.init(o),e.gumStream=o,t.next=10,e.recorder.start();case 10:e.isRecording=!0,t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](2),e.isRecording=!1;case 16:case"end":return t.stop()}}),t,null,[[2,13]])})))()},stopRecording:function(){var e=this;this.isRecording=!1,this.gumStream.getAudioTracks()[0].stop(),this.recorder.stop().then((function(t){var n=t.blob;e.isRecording=!1,e.$emit("input",n)}))}}},d=l,f=n("2877"),h=Object(f["a"])(d,r,i,!1,null,"4a4863d1",null),p=h.exports,g={props:["question","text-class"],components:{Recorder:p},data:function(){return{audioSrc:null}},methods:{handleRecorder:function(e){this.audioSrc=URL.createObjectURL(e),this.$emit("input",e)}}},v=g,m=Object(f["a"])(v,o,a,!1,null,null,null);t["default"]=m.exports},"5c3d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n("9dd0"),r=i(a);function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c={nFrequencyBars:255,onAnalysed:null},u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,e),this.config=Object.assign({},c,n),this.audioContext=t,this.audioInput=null,this.realAudioInput=null,this.inputPoint=null,this.audioRecorder=null,this.rafID=null,this.analyserContext=null,this.recIndex=0,this.stream=null,this.updateAnalysers=this.updateAnalysers.bind(this)}return o(e,[{key:"init",value:function(e){var t=this;return new Promise((function(n){t.inputPoint=t.audioContext.createGain(),t.stream=e,t.realAudioInput=t.audioContext.createMediaStreamSource(e),t.audioInput=t.realAudioInput,t.audioInput.connect(t.inputPoint),t.analyserNode=t.audioContext.createAnalyser(),t.analyserNode.fftSize=2048,t.inputPoint.connect(t.analyserNode),t.audioRecorder=new r.default(t.inputPoint);var o=t.audioContext.createGain();o.gain.value=0,t.inputPoint.connect(o),o.connect(t.audioContext.destination),t.updateAnalysers(),n()}))}},{key:"start",value:function(){var e=this;return new Promise((function(t,n){e.audioRecorder?(e.audioRecorder.clear(),e.audioRecorder.record(),t(e.stream)):n("Not currently recording")}))}},{key:"stop",value:function(){var e=this;return new Promise((function(t){e.audioRecorder.stop(),e.audioRecorder.getBuffer((function(n){e.audioRecorder.exportWAV((function(e){return t({buffer:n,blob:e})}))}))}))}},{key:"updateAnalysers",value:function(){if(this.config.onAnalysed){requestAnimationFrame(this.updateAnalysers);var e=new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.getByteFrequencyData(e);for(var t=new Array(255),n=0,o=void 0,a=0;a<255;a+=1)o=Math.floor(e[a])-Math.floor(e[a])%5,0!==o&&(n=a),t[a]=o;this.config.onAnalysed({data:t,lineTo:n})}}},{key:"setOnAnalysed",value:function(e){this.config.onAnalysed=e}}]),e}();u.download=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"audio";r.default.forceDownload(e,t+".wav")},t.default=u},"78fe":function(e,t,n){(function(t){var n=!!(t===t.window&&t.URL&&t.Blob&&t.Worker);function o(e,o){var a,r=this;if(o=o||{},n)return a=e.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],new t.Worker(t.URL.createObjectURL(new t.Blob([a],{type:"text/javascript"})));function i(e){setTimeout((function(){r.onmessage({data:e})}),0)}this.self=o,this.self.postMessage=i,setTimeout(e.bind(o,o),0)}o.prototype.postMessage=function(e){var t=this;setTimeout((function(){t.self.onmessage({data:e})}),0)},e.exports=o}).call(this,n("c8ba"))},"9dd0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n("78fe"),r=i(a);function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c={bufferLen:4096,numChannels:2,mimeType:"audio/wav"},u=function(){function e(t,n){var o=this;s(this,e),this.config=Object.assign({},c,n),this.recording=!1,this.callbacks={getBuffer:[],exportWAV:[]},this.context=t.context,this.node=(this.context.createScriptProcessor||this.context.createJavaScriptNode).call(this.context,this.config.bufferLen,this.config.numChannels,this.config.numChannels),this.node.onaudioprocess=function(e){if(o.recording){for(var t=[],n=0;n<o.config.numChannels;n++)t.push(e.inputBuffer.getChannelData(n));o.worker.postMessage({command:"record",buffer:t})}},t.connect(this.node),this.node.connect(this.context.destination);var a={};this.worker=new r.default((function(){var e=0,t=[],n=void 0,o=void 0;function a(e){n=e.sampleRate,o=e.numChannels,u()}function r(n){for(var a=0;a<o;a++)t[a].push(n[a]);e+=n[0].length}function i(n){for(var a=[],r=0;r<o;r++)a.push(l(t[r],e));var i=void 0;i=2===o?d(a[0],a[1]):a[0];var s=p(i),c=new Blob([s],{type:n});this.postMessage({command:"exportWAV",data:c})}function s(){for(var n=[],a=0;a<o;a++)n.push(l(t[a],e));this.postMessage({command:"getBuffer",data:n})}function c(){e=0,t=[],u()}function u(){for(var e=0;e<o;e++)t[e]=[]}function l(e,t){for(var n=new Float32Array(t),o=0,a=0;a<e.length;a++)n.set(e[a],o),o+=e[a].length;return n}function d(e,t){var n=e.length+t.length,o=new Float32Array(n),a=0,r=0;while(a<n)o[a++]=e[r],o[a++]=t[r],r++;return o}function f(e,t,n){for(var o=0;o<n.length;o++,t+=2){var a=Math.max(-1,Math.min(1,n[o]));e.setInt16(t,a<0?32768*a:32767*a,!0)}}function h(e,t,n){for(var o=0;o<n.length;o+=1)e.setUint8(t+o,n.charCodeAt(o))}function p(e){var t=new ArrayBuffer(44+2*e.length),a=new DataView(t);return h(a,0,"RIFF"),a.setUint32(4,36+2*e.length,!0),h(a,8,"WAVE"),h(a,12,"fmt "),a.setUint32(16,16,!0),a.setUint16(20,1,!0),a.setUint16(22,o,!0),a.setUint32(24,n,!0),a.setUint32(28,4*n,!0),a.setUint16(32,2*o,!0),a.setUint16(34,16,!0),h(a,36,"data"),a.setUint32(40,2*e.length,!0),f(a,44,e),a}this.onmessage=function(e){switch(e.data.command){case"init":a(e.data.config);break;case"record":r(e.data.buffer);break;case"exportWAV":i(e.data.type);break;case"getBuffer":s();break;case"clear":c();break}}}),a),this.worker.postMessage({command:"init",config:{sampleRate:this.context.sampleRate,numChannels:this.config.numChannels}}),this.worker.onmessage=function(e){var t=o.callbacks[e.data.command].pop();"function"===typeof t&&t(e.data.data)}}return o(e,[{key:"record",value:function(){this.recording=!0}},{key:"stop",value:function(){this.recording=!1}},{key:"clear",value:function(){this.worker.postMessage({command:"clear"})}},{key:"getBuffer",value:function(e){if(e=e||this.config.callback,!e)throw new Error("Callback not set");this.callbacks.getBuffer.push(e),this.worker.postMessage({command:"getBuffer"})}},{key:"exportWAV",value:function(e,t){if(t=t||this.config.mimeType,e=e||this.config.callback,!e)throw new Error("Callback not set");this.callbacks.exportWAV.push(e),this.worker.postMessage({command:"exportWAV",type:t})}}]),e}();u.forceDownload=function(e,t){var n=document.createElement("a");n.style="display: none",document.body.appendChild(n);var o=window.URL.createObjectURL(e);n.href=o,n.download=t,n.click(),window.URL.revokeObjectURL(o),document.body.removeChild(n)},t.default=u},c782:function(e,t,n){e.exports=n("5c3d")}}]);
//# sourceMappingURL=chunk-2ca917a0.0a02e0cd.js.map