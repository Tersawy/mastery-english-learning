(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Courses"],{"0fe2":function(e,t,s){},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"17cc":function(e,t,s){"use strict";var n=s("1da1");s("99af"),s("ac1f"),s("841c"),s("96cf");t["a"]={data:function(){return{perPageOptions:[{value:10,text:10},{value:20,text:20},{value:30,text:30},{value:40,text:40},{value:50,text:50}],tableIsBusy:!1,perPage:10,page:1,sortBy:"",sortDesc:!1,search:""}},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getItems(e.queries);case 2:e.$store.commit("setLoader",!1);case 3:case"end":return t.stop()}}),t)})))()},computed:{items:function(){return this.$store.state[this.namespace].all.docs},docsCount:function(){return this.$store.state[this.namespace].all.total},dirSort:function(){return this.sortDesc?"desc":"asc"},fieldSort:function(){return"image"==this.sortBy?"id":this.sortBy},queries:function(){var e="?page=".concat(this.page,"&per_page=").concat(this.perPage,"&search=").concat(this.search,"&sort_by=").concat(this.fieldSort,"&sort_dir=").concat(this.dirSort);for(var t in this.filterationFields)e+="&".concat(t,"=").concat(this.filterationFields[t]);return e}},watch:{search:function(){this.page=1,this.sortBy="id",this.sortDesc=!1},page:function(){this.finallData()},perPage:function(){this.page=1}},methods:{getItems:function(e){return this.$store.dispatch("".concat(this.namespace,"/all"),e)},moveToTrash:function(e){return this.$store.dispatch("".concat(this.namespace,"/moveToTrash"),e)},remove:function(e){return this.$store.dispatch("".concat(this.namespace,"/remove"),e)},setOne:function(e){this.$store.commit("".concat(this.namespace,"/one"),{data:e})},contextChanged:function(e){this.sortBy=e.sortBy,this.sortDesc=e.sortDesc,this.finallData()},finallData:function(){var e=this;this.tableIsBusy=!0,this.getItems(this.queries),this.$nextTick((function(){e.tableIsBusy=!1}))}}}},2490:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{staticClass:"delete-field-modal",attrs:{id:e.modalId,"body-class":"p-0","hide-footer":"","hide-header":"",centered:"","no-close-on-backdrop":e.btnLoading,"no-close-on-esc":e.btnLoading},on:{hide:function(t){e.btnLoading=!1}}},[s("div",{staticClass:"modal-delete"},[s("div",{staticClass:"modal-icon"},[s("i",{staticClass:"fa fa-times"})]),s("p",{staticClass:"modal-msg py-4"},[e._t("msg",(function(){return[e._v(e._s(e.msg))]}))],2),s("div",{staticClass:"modal-btn-action d-flex justify-content-center"},[e.btnLoading?s("b-btn",{staticClass:"mx-1",attrs:{disabled:"",size:"md",variant:"danger"}},[e._v(" Loading... "),s("b-spinner",{attrs:{type:"grow",small:""}})],1):s("b-btn",{staticClass:"mx-1",attrs:{size:"md",variant:"danger"},on:{click:e.done}},[e._v(" Ok ")]),s("b-btn",{staticClass:"mx-1",attrs:{size:"md",variant:"blue",disabled:e.btnLoading},on:{click:function(t){return e.$bvModal.hide(e.modalId)}}},[e._v(" No ")])],1)])])},i=[],o={props:["msg","modalId"],data:function(){return{btnLoading:!1}},methods:{done:function(){this.btnLoading=!0,this.$emit("done")}}},a=o,r=(s("35d6"),s("2877")),c=Object(r["a"])(a,n,i,!1,null,null,null);t["a"]=c.exports},"27bd":function(e,t,s){"use strict";s("4468")},"33ca":function(e,t,s){},"35d6":function(e,t,s){"use strict";s("78d1")},"371c":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"courses"},[s("b-breadcrumb",{staticClass:"bg-white border rounded shadow-sm font-weight-600 mb-30px"},[s("b-breadcrumb-item",{attrs:{to:"/dashboard"}},[s("b-icon",{staticClass:"mr-1",attrs:{icon:"house-fill",scale:"1.25","shift-v":"1.25","aria-hidden":"true"}}),e._v(" Dashboard ")],1),s("b-breadcrumb-item",{attrs:{active:""}},[e._v(" Courses ")])],1),s("b-row",{staticClass:"mb-30px"},[s("b-col",{attrs:{cols:"4"}},[s("b-form-group",{staticClass:"mb-0"},[s("b-input-group",[s("b-form-input",{attrs:{placeholder:"Search in Courses"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),s("b-input-group-append",[s("b-btn",{attrs:{variant:"blue"}},[s("i",{staticClass:"fas fa-filter"})])],1)],1)],1)],1),s("b-col",{staticClass:"text-right"},[s("b-btn",{staticClass:"d-inline-flex align-items-center",attrs:{variant:"primary",to:{name:"CreateCourse"}}},[s("b-icon",{staticClass:"mr-1",attrs:{icon:"plus",scale:"1.3"}}),e._v(" Create ")],1)],1)],1),s("b-modal",{attrs:{id:"dropdownActionModal","hide-header":"","hide-footer":"","body-class":"p-0",centered:"",size:"sm"}},[s("ul",{staticClass:"m-0 p-0 list-unstyled"},[s("b-dropdown-item",{attrs:{"link-class":"py-2 d-flex align-items-center",to:{name:"DashboardShowCourse",params:{courseId:e.course._id}}}},[s("b-icon",{attrs:{icon:"eye",scale:"0.8"}}),s("span",{staticClass:"mx-2 text-muted"},[e._v("Show Details")])],1),s("b-dropdown-item",{attrs:{"link-class":"py-2 d-flex align-items-center",to:{name:"UpdateCourse",params:{courseId:e.course._id}}}},[s("b-icon",{attrs:{icon:"pencil-square",scale:"0.8"}}),s("span",{staticClass:"mx-2 text-muted"},[e._v("Edit Course")])],1),s("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.approveFieldModal",modifiers:{approveFieldModal:!0}}],attrs:{"link-class":"py-2 d-flex align-items-center"}},[e.courseIsApproved?[s("b-icon",{attrs:{icon:"x-square",scale:"0.8"}}),s("span",{staticClass:"mx-2 text-muted"},[e._v("Refusal to approve Course")])]:[s("b-icon",{attrs:{icon:"check-square",scale:"0.8"}}),s("span",{staticClass:"mx-2 text-muted"},[e._v("Approve Course")])]],2),s("b-dropdown-item",{attrs:{"link-class":"py-2 d-flex align-items-center"},on:{click:function(t){return e.showSections(e.course)}}},[s("b-icon",{attrs:{icon:"collection",scale:"0.8"}}),s("span",{staticClass:"mx-2 text-muted"},[e._v("Show Sections")])],1),s("b-dropdown-item",{attrs:{"link-class":"py-2 d-flex align-items-center"},on:{click:function(t){return e.createSection(e.course)}}},[s("b-icon",{attrs:{icon:"plus-circle",scale:"0.8"}}),s("span",{staticClass:"mx-2 text-muted"},[e._v("Create Section")])],1),s("hr",{staticClass:"m-0"}),s("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.deleteCourseModal",modifiers:{deleteCourseModal:!0}}],attrs:{"link-class":"py-2 d-flex align-items-center text-danger"}},[s("b-icon",{attrs:{icon:"trash",scale:"0.8"}}),s("span",{staticClass:"mx-2 text-muted"},[e._v("Delete Course")])],1)],1)]),s("b-table",{staticClass:"bg-white shadow-sm mt-3 mb-0",attrs:{"show-empty":"",stacked:"lg",responsive:"",hover:"","sort-icon-left":"",busy:e.tableIsBusy,items:e.items,fields:e.fields,"current-page":1,"per-page":e.perPage,"sort-by":e.sortBy,"sort-desc":e.sortDesc,filter:e.search,"filter-function":function(){return e.items}},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t},"context-changed":e.contextChanged},scopedSlots:e._u([{key:"cell(actions)",fn:function(t){return[s("b-icon",{staticClass:"c-pointer",attrs:{icon:"three-dots-vertical",scale:"1.5"},on:{click:function(s){return e.showActions(t.item)}}})]}},{key:"cell(thumbnail)",fn:function(t){return[s("b-avatar",{staticClass:"shadow-sm",attrs:{src:e.thumbnailsURL+"/"+t.value,alt:t.value,rounded:"lg"}})]}},{key:"cell(title)",fn:function(t){return[s("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:t.value,expression:"row.value"}]},[e._v(" "+e._s(e._f("strLength")(t.value,30))+" ")])]}},{key:"cell(status)",fn:function(e){return[s("span",{directives:[{name:"course-status",rawName:"v-course-status",value:e.value,expression:"row.value"}]})]}}])}),s("b-row",{staticClass:"pt-3"},[s("b-col",{attrs:{sm:"6",md:"6",lg:"4"}},[s("div",{staticClass:"d-flex align-items-center"},[s("b-card",{staticClass:"rounded-pill",attrs:{"body-class":"d-flex align-items-center py-0 px-3"}},[s("span",{staticClass:"text-muted"},[e._v("Rows per page: ")]),s("b-form-group",{staticClass:"mb-0"},[s("b-form-select",{staticClass:"bg-transparent border-0 shadow-none",attrs:{options:e.perPageOptions},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1)],1)],1)]),s("b-col",{staticClass:"ml-auto",attrs:{sm:"6",md:"6",lg:"4"}},[s("b-pagination",{staticClass:"pagination",attrs:{"total-rows":e.docsCount,"per-page":e.perPage,align:"fill",size:"md",pills:""},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1)],1),s("Sections"),s("SectionForm"),s("ApproveFieldModal",{attrs:{msg:e.approveMsg},on:{done:e.changeStatusCourse}}),s("DeleteFieldModal",{attrs:{msg:"Are you sure to delete this course ?","modal-id":"deleteCourseModal"},on:{done:e.removeCourse}})],1)},i=[],o=s("1da1"),a=(s("96cf"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{attrs:{id:"sections","hide-footer":"",size:"lg","body-class":"p-0"},on:{hidden:function(t){return e.$emit("closed")}},scopedSlots:e._u([{key:"modal-header",fn:function(t){var n=t.close;return[s("div",{staticClass:"d-flex align-items-center justify-content-between w-100"},[s("div",{staticClass:"d-flex align-items-center"},[s("h5",{staticClass:"mb-0 font-weight-bold"},[e._v("Sections")])]),s("b-button",{attrs:{size:"sm",variant:"outline-danger"},on:{click:function(e){return n()}}},[e._v(" Close ")])],1)]}}])},[s("div",{staticClass:"course-content-sections"},[e.course.sections&&0==e.course.sections.length?s("p",{staticClass:"mb-0 lead text-center py-3"},[s("span",[e._v("There's no sections to show, ")]),s("span",{staticClass:"text-blue c-pointer",staticStyle:{"text-decoration":"underline"},on:{click:e.createSection}},[e._v("Create section")])]):e._e(),e._l(e.course.sections,(function(t,n){return s("b-card",{key:n,attrs:{"no-body":""}},[s("b-card-body",{staticClass:"p-3 d-flex justify-content-between"},[s("div",{staticClass:"d-flex align-items-center c-pointer",on:{click:function(s){return e.$store.commit("Course/toggleLectures",t)}}},[s("b-icon",{attrs:{icon:"chevron-"+(t.lecturesVisible?"up":"down")}}),s("span",{staticClass:"mx-2 font-weight-500"},[e._v(e._s(t.title))])],1),s("div",{staticClass:"d-flex justify-content-center align-items-center"},[s("span",{staticClass:"font-sm text-nowrap mr-2"},[e._v(" "+e._s(t.lectures.length)+" lectures ")]),s("b-dropdown",{attrs:{variant:"link","toggle-class":"text-decoration-none p-0 text-dark","no-caret":""},scopedSlots:e._u([{key:"button-content",fn:function(){return[s("b-icon",{staticClass:"c-pointer",attrs:{icon:"three-dots-vertical",scale:"1.3"},on:{click:function(s){return e.showSectionActions(t)}}})]},proxy:!0}],null,!0)},[s("b-dropdown-item",{attrs:{"link-class":"py-2 d-flex align-items-center"},on:{click:e.showSectionQuiz}},[s("b-icon",{attrs:{icon:"file-earmark-spreadsheet",scale:"0.8"}}),s("span",{staticClass:"mx-2 text-muted"},[e._v("Show Quiz")])],1),s("b-dropdown-item",{attrs:{"link-class":"py-2 d-flex align-items-center"},on:{click:function(s){return e.createLecture(t)}}},[s("b-icon",{attrs:{icon:"folder-check",scale:"0.8"}}),s("span",{staticClass:"mx-2 text-muted"},[e._v("Add Lecture")])],1),s("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.sectionForm",modifiers:{sectionForm:!0}}],attrs:{"link-class":"py-2 d-flex align-items-center"}},[s("b-icon",{attrs:{icon:"pencil-square",scale:"0.8"}}),s("span",{staticClass:"mx-2 text-muted"},[e._v("Update Section")])],1),s("hr",{staticClass:"m-0"}),s("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.removeSectionModal",modifiers:{removeSectionModal:!0}}],attrs:{"link-class":"py-2 d-flex align-items-center text-danger"}},[s("b-icon",{attrs:{icon:"trash",scale:"0.8"}}),s("span",{staticClass:"mx-2 text-muted"},[e._v("Delete Section")])],1)],1)],1)]),s("b-collapse",{model:{value:t.lecturesVisible,callback:function(s){e.$set(t,"lecturesVisible",s)},expression:"section.lecturesVisible"}},[s("b-card-footer",{staticClass:"p-0 border-0"},e._l(t.lectures,(function(n,i){return s("div",{key:i,staticClass:"d-flex align-items-baseline justify-content-between p-3 font-md"},[s("div",[s("span",{staticStyle:{"font-size":"18px"}},[n.video?s("b-icon",{staticClass:"rounded-circle bg-dark p-1 c-pointer",attrs:{icon:"caret-right-fill",variant:"white"},on:{click:function(t){return e.showLectureVideo(n)}}}):s("b-icon",{staticClass:"rounded-circle bg-dark p-1",attrs:{icon:"dash-circle",scale:"2",variant:"white"}})],1),n.video?s("span",{staticClass:"mx-2 text-primary c-pointer",staticStyle:{"text-decoration":"underline"},on:{click:function(t){return e.showLectureVideo(n)}}},[e._v(" "+e._s(n.title)+" ")]):s("span",{staticClass:"mx-2"},[e._v(e._s(n.title))]),s("b-icon",{staticClass:"c-pointer",attrs:{icon:"chevron-"+(n.descriptionVisible?"up":"down"),variant:"dark"},on:{click:function(e){n.descriptionVisible=!n.descriptionVisible}}}),s("b-collapse",{model:{value:n.descriptionVisible,callback:function(t){e.$set(n,"descriptionVisible",t)},expression:"lecture.descriptionVisible"}},[s("p",{staticClass:"text-muted pl-4 mt-1 mb-0 font-md",domProps:{innerHTML:e._s(n.description)}})])],1),s("div",{staticClass:"c-pointer d-flex align-items-center"},[s("b-form-checkbox",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:(n.videoReview?"Disable":"Enable")+" Video Review",expression:"(lecture.videoReview ? 'Disable' : 'Enable') + ' Video Review'"}],staticClass:"ml-2 c-pointer",attrs:{switch:""},on:{change:function(s){return e.changeVideoReview(n,t)}},model:{value:n.videoReview,callback:function(t){e.$set(n,"videoReview",t)},expression:"lecture.videoReview"}}),s("b-dropdown",{attrs:{variant:"link","toggle-class":"text-decoration-none p-0 text-dark","no-caret":""},scopedSlots:e._u([{key:"button-content",fn:function(){return[s("b-icon",{staticClass:"c-pointer",attrs:{icon:"three-dots-vertical",scale:"1.5"},on:{click:function(s){return e.showLectureActions(n,t)}}})]},proxy:!0}],null,!0)},[s("b-dropdown-item",{attrs:{"link-class":"py-2 d-flex align-items-center"},on:{click:e.showQuiz}},[s("b-icon",{attrs:{icon:"file-earmark-spreadsheet",scale:"0.8"}}),s("span",{staticClass:"mx-2 text-muted"},[e._v("Show Quiz")])],1),n.video?s("b-dropdown-item",{attrs:{"link-class":"py-2 d-flex align-items-center"},on:{click:e.changeLectureVideo}},[s("b-icon",{attrs:{icon:"arrow-repeat",scale:"0.8"}}),s("span",{staticClass:"mx-2 text-muted"},[e._v("Change Lecture Video")])],1):s("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.lectureVideoForm",modifiers:{lectureVideoForm:!0}}],attrs:{"link-class":"py-2 d-flex align-items-center"}},[s("b-icon",{attrs:{icon:"plus-circle",scale:"0.8"}}),s("span",{staticClass:"mx-2 text-muted"},[e._v("Create Lecture Video")])],1),s("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.lectureForm",modifiers:{lectureForm:!0}}],attrs:{"link-class":"py-2 d-flex align-items-center"}},[s("b-icon",{attrs:{icon:"pencil-square",scale:"0.8"}}),s("span",{staticClass:"mx-2 text-muted"},[e._v("Update Lecture")])],1),s("hr",{staticClass:"m-0"}),s("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.removeLectureModal",modifiers:{removeLectureModal:!0}}],attrs:{"link-class":"py-2 d-flex align-items-center text-danger"}},[s("b-icon",{attrs:{icon:"trash",scale:"0.8"}}),s("span",{staticClass:"mx-2 text-muted"},[e._v("Delete Lecture")])],1)],1)],1)])})),0)],1)],1)}))],2),s("LectureForm"),s("LectureVideoForm",{attrs:{"is-change":e.isChangeVideo},on:{closed:function(t){e.isChangeVideo=!1}}}),s("LectureVideo"),s("Quiz",{attrs:{lectureQuiz:e.lectureQuiz}}),s("DeleteFieldModal",{attrs:{msg:"Are you sure to delete this section ?","modal-id":"removeSectionModal"},on:{done:e.handleRemoveSection}}),s("DeleteFieldModal",{attrs:{msg:"Are you sure to delete this lecture ?","modal-id":"removeLectureModal"},on:{done:e.handleRemoveLecture}})],1)}),r=[],c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{attrs:{"no-close-on-backdrop":e.isLoading,"no-close-on-esc":e.isLoading,id:"lectureForm","hide-footer":"",size:"lg"},on:{hidden:e.resetModal,ok:e.handleSave,show:e.modalIsShown},scopedSlots:e._u([{key:"modal-header",fn:function(t){var n=t.close;return[s("div",{staticClass:"d-flex align-items-center justify-content-between w-100"},[s("div",{staticClass:"d-flex align-items-center"},[e.isUpdate?[s("h6",{staticClass:"mb-0"},[e._v("Update Lecture")])]:[s("h6",{staticClass:"mb-0"},[e._v("Create Lecture")])]],2),s("b-button",{attrs:{disabled:e.isLoading,size:"sm",variant:"outline-danger"},on:{click:function(e){return n()}}},[e._v(" Close ")])],1)]}},{key:"default",fn:function(t){var n=t.ok;return[s("b-form",{on:{submit:function(t){return t.preventDefault(),e.handleSave.apply(null,arguments)}}},[s("b-form-group",{attrs:{label:"Lecture Title","label-for":"title"}},[s("b-form-input",{ref:"titleInput",attrs:{disabled:e.isLoading,id:"title"},model:{value:e.lecture.title,callback:function(t){e.$set(e.lecture,"title",t)},expression:"lecture.title"}}),s("input-error",{attrs:{vuelidate:e.$v.lecture.title,field:"title",namespace:e.namespace}})],1),s("b-form-group",{attrs:{label:"Lecture Description","label-for":"description"}},[s("vue-editor",{staticStyle:{border:"none"},attrs:{disabled:e.isLoading,editorToolbar:e.customToolbar},model:{value:e.lecture.description,callback:function(t){e.$set(e.lecture,"description",t)},expression:"lecture.description"}}),s("input-error",{attrs:{vuelidate:e.$v.lecture.description,field:"description",namespace:e.namespace}})],1),s("div",{staticClass:"text-right"},[s("b-overlay",{staticClass:"d-inline-block",attrs:{show:e.isLoading,rounded:"",opacity:"0.6","spinner-small":"","spinner-variant":"primary"}},[e.isUpdate?s("b-btn",{attrs:{disabled:e.isLoading,variant:"outline-success"},on:{click:function(e){return n()}}},[e._v("Update")]):s("b-btn",{attrs:{disabled:e.isLoading,variant:"outline-primary"},on:{click:function(e){return n()}}},[e._v("Save")])],1)],1)],1)]}}])})},u=[],l=s("5530"),d=s("5873"),p=s("b5ae"),m={components:{VueEditor:d["a"]},data:function(){return{namespace:"Course",lecture:{title:null,description:null},customToolbar:[[{header:[!1,1,2,3,4,5,6]}],["bold","italic","underline","strike"],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["clean"]]}},validations:{lecture:{title:{required:p["required"],minLength:Object(p["minLength"])(3),maxLength:Object(p["maxLength"])(54)},description:{maxLength:Object(p["maxLength"])(5120)}}},computed:{oldLecture:function(){return this.$store.state.Course.oneLecture},isUpdate:function(){return!!this.oldLecture&&!!this.oldLecture._id},section:function(){return this.$store.state.Course.oneSection}},methods:{handleSave:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e.preventDefault(),t.$v.$touch(),!t.$v.$invalid){s.next=4;break}return s.abrupt("return");case 4:if(s.prev=4,t.setLoading(!0),!t.isUpdate){s.next=12;break}return s.next=9,t.$store.dispatch("Course/updateLecture",t.lecture);case 9:n=s.sent,s.next=15;break;case 12:return s.next=14,t.$store.dispatch("Course/createLecture",t.lecture);case 14:n=s.sent;case 15:t.setGlobalSuccess(n.msg),t.$bvModal.hide("lectureForm"),s.next=21;break;case 19:s.prev=19,s.t0=s["catch"](4);case 21:t.setLoading(!1);case 22:case"end":return s.stop()}}),s,null,[[4,19]])})))()},modalIsShown:function(){var e=this;setTimeout((function(){return e.$refs.titleInput.focus()}),400),this.isUpdate&&(this.lecture=Object(l["a"])({},this.oldLecture))},resetModal:function(){this.$v.$reset(),this.removeAllErrors(),this.lecture={title:null,description:null}}}},h=m,v=s("2877"),f=Object(v["a"])(h,c,u,!1,null,null,null),b=f.exports,g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{attrs:{id:"quiz","hide-footer":"",size:"xl"},scopedSlots:e._u([{key:"modal-header",fn:function(t){var n=t.close;return[s("div",{staticClass:"d-flex align-items-center justify-content-between w-100"},[s("div",{staticClass:"d-flex align-items-center"},[s("h6",{staticClass:"mb-0"},[s("span",{staticClass:"font-weight-700"},[e._v(e._s(e.lectureQuiz?"Lecture":"Section")+" Quiz: ")]),s("span",[e._v(e._s(e.lectureQuiz?e.lecture.title:e.section.title))])])]),s("b-button",{attrs:{size:"sm",variant:"outline-danger"},on:{click:function(e){return n()}}},[e._v(" Close ")])],1)]}},{key:"default",fn:function(){return[e.quiz&&e.quiz.questions&&0!=e.quiz.questions.length?[s("div",{staticClass:"mb-3 text-center"},[s("b-btn",{attrs:{variant:"outline-blue"},on:{click:e.createQuestion}},[e._v("Add a new Question")])],1),s("ul",{staticClass:"list-unstyled"},e._l(e.quiz.questions,(function(t,n){return s("li",{key:n,staticClass:"question-item odd-light px-2 py-3"},[s("div",{staticClass:"d-flex align-items-center justify-content-between"},[s("div",{staticClass:"d-flex align-items-center justify-content-between"},[s("span",[e._v(" "+e._s(n+1)+" )  "+e._s(t.text))]),s("span",{staticStyle:{"font-size":"11px","letter-spacing":"1px"}},[e._v("   ( "+e._s(e.QUESTION_TYPES_STR[t.type])+" )   ")])]),s("div",{staticClass:"actions"},[s("b-icon",{staticClass:"mr-3 c-pointer",attrs:{icon:"pencil-square",scale:"1.2",variant:"success"},on:{click:function(s){return e.updateQuestion(t)}}}),s("b-icon",{staticClass:"c-pointer",attrs:{icon:"trash",scale:"1.2",variant:"danger"},on:{click:function(s){return e.removeQuestion(t)}}})],1)]),t.choices&&t.choices.length?s("div",[s("ul",{staticClass:"d-flex align-items-center justify-content-around p-0 mt-2"},e._l(t.choices,(function(t,n){return s("li",{key:n},[e._v(e._s(t))])})),0)]):e._e()])})),0)]:s("p",{staticClass:"mb-0 lead text-center"},[s("span",[e._v("There's no quiz to show, ")]),s("span",{staticClass:"text-blue c-pointer",staticStyle:{"text-decoration":"underline"},on:{click:e.createQuiz}},[e._v("Create quiz")])]),s("QuizForm",{attrs:{lectureQuiz:e.lectureQuiz}}),s("QuestionForm",{attrs:{lectureQuiz:e.lectureQuiz}}),s("DeleteFieldModal",{attrs:{msg:"Are you sure to delete this question ?","modal-id":"removeQuestionModal"},on:{done:e.handleRemoveQuestion}})]},proxy:!0}])})},x=[],w=s("5b55"),C=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{attrs:{"no-close-on-backdrop":e.isLoading,"no-close-on-esc":e.isLoading,id:"quizForm","hide-footer":"",size:"xl"},on:{hidden:e.resetModal,ok:e.handleSave,show:e.modalIsShown},scopedSlots:e._u([{key:"modal-header",fn:function(t){var n=t.close;return[s("div",{staticClass:"d-flex align-items-center justify-content-between w-100"},[s("div",{staticClass:"d-flex align-items-center"},[e.isUpdate?[s("h6",{staticClass:"mb-0"},[e._v("Update Quiz")])]:[s("h6",{staticClass:"mb-0"},[e._v("Create Quiz")])]],2),s("b-button",{attrs:{disabled:e.isLoading,size:"sm",variant:"outline-danger"},on:{click:function(e){return n()}}},[e._v(" Close ")])],1)]}},{key:"default",fn:function(t){var n=t.ok;return[s("b-form",{on:{submit:function(t){return t.preventDefault(),e.addQuestion.apply(null,arguments)}}},[s("b-form-group",{attrs:{label:"Question","label-for":"text"}},[s("b-form-input",{ref:"textInput",attrs:{disabled:e.isLoading,id:"text"},model:{value:e.question.text,callback:function(t){e.$set(e.question,"text",t)},expression:"question.text"}}),s("input-error",{attrs:{vuelidate:e.$v.question.text,field:"text",namespace:e.namespace}})],1),s("b-form-group",{attrs:{label:"Question Type","label-for":"type"}},[s("b-form-select",{attrs:{disabled:e.isLoading,id:"type",options:e.questionTypes},model:{value:e.question.type,callback:function(t){e.$set(e.question,"type",t)},expression:"question.type"}}),s("input-error",{attrs:{vuelidate:e.$v.question.type,field:"type",namespace:e.namespace}})],1),e.isQuestionChoises?s("b-form-group",{attrs:{label:"Question Choices","label-for":"choices"}},[s("b-form-tags",{attrs:{disabled:e.isLoading,"input-id":"choices",placeholder:"","tag-variant":"blue"},model:{value:e.question.choices,callback:function(t){e.$set(e.question,"choices",t)},expression:"question.choices"}}),s("input-error",{attrs:{vuelidate:e.$v.question.choices,field:"choices",namespace:e.namespace}})],1):e._e(),e.isQuestionEssay||e.$v.question.text.$invalid?e._e():s("b-form-group",{attrs:{label:"Question Answer","label-for":"answer"}},[e.isQuestionComplete?s("b-form-tags",{attrs:{disabled:e.isLoading,"input-id":"answer",placeholder:"","tag-variant":"blue"},model:{value:e.question.answer,callback:function(t){e.$set(e.question,"answer",t)},expression:"question.answer"}}):e.isQuestionTrueOrFalse?s("b-form-radio-group",{staticClass:"d-flex",attrs:{options:[!0,!1],disabled:e.isLoading},model:{value:e.question.answer,callback:function(t){e.$set(e.question,"answer",t)},expression:"question.answer"}}):s("b-form-input",{attrs:{disabled:e.isLoading,id:"answer"},model:{value:e.question.answer,callback:function(t){e.$set(e.question,"answer",t)},expression:"question.answer"}}),s("input-error",{attrs:{vuelidate:e.$v.question.answer,field:"answer",namespace:e.namespace}})],1),s("div",{staticClass:"text-center py-4"},[e.isQuestionUpdate?s("b-btn",{attrs:{variant:"outline-success"},on:{click:e.addQuestion}},[e._v("Update The Question")]):s("b-btn",{attrs:{variant:"outline-blue"},on:{click:e.addQuestion}},[e._v("Add The Question")])],1),s("ul",{staticClass:"list-unstyled"},e._l(e.quiz.questions,(function(t,n){return s("li",{key:n,staticClass:"question-item px-2 py-3"},[s("div",{staticClass:"d-flex align-items-center justify-content-between"},[s("div",{staticClass:"d-flex align-items-center justify-content-between"},[s("span",[e._v(" "+e._s(n+1)+" )  "+e._s(t.text))]),s("span",{staticStyle:{"font-size":"11px","letter-spacing":"1px"}},[e._v("   ( "+e._s(e.QUESTION_TYPES_STR[t.type])+" )   ")])]),s("div",{staticClass:"actions"},[s("b-icon",{staticClass:"mr-3 c-pointer",attrs:{icon:"pencil-square",scale:"1.2",variant:"success"},on:{click:function(s){return e.fillToUpdateQuestion(t)}}}),s("b-icon",{staticClass:"c-pointer",attrs:{icon:"trash",scale:"1.2",variant:"danger"},on:{click:function(s){return e.removeQuestion(t)}}})],1)]),t.choices&&t.choices.length?s("div",[s("ul",{staticClass:"d-flex align-items-center justify-content-around p-0 mt-2"},e._l(t.choices,(function(t,n){return s("li",{key:n},[e._v(e._s(t))])})),0)]):e._e()])})),0),s("input-error",{attrs:{vuelidate:e.$v.quiz.questions,field:"questions",namespace:e.namespace}}),s("div",{staticClass:"text-right"},[s("b-overlay",{staticClass:"d-inline-block",attrs:{show:e.isLoading,rounded:"",opacity:"0.6","spinner-small":"","spinner-variant":"primary"}},[e.isUpdate?s("b-btn",{attrs:{disabled:e.isLoading,variant:"outline-success"},on:{click:function(e){return n()}}},[e._v("Update")]):s("b-btn",{attrs:{disabled:e.isLoading,variant:"outline-primary"},on:{click:function(e){return n()}}},[e._v("Save")])],1)],1)],1)]}}])})},k=[],y=(s("ac1f"),s("466d"),s("99af"),s("caad"),s("2532"),s("4de4"),{props:["lectureQuiz"],data:function(){return{namespace:"Course",questionTypes:[{text:w["l"][w["h"]],value:w["h"]},{text:w["l"][w["g"]],value:w["g"]},{text:w["l"][w["k"]],value:w["k"]},{text:w["l"][w["i"]],value:w["i"]},{text:w["l"][w["j"]],value:w["j"]}],quiz:{questions:[]},question:{text:null,type:w["i"],choices:[],answer:null},isQuestionUpdate:!1}},validations:{question:{text:{required:p["required"],minLength:Object(p["minLength"])(3),maxLength:Object(p["maxLength"])(255)},type:{numeric:p["numeric"]},choices:{required:Object(p["requiredIf"])((function(e){return e.type==w["g"]})),minLength:Object(p["minLength"])(2)},answer:{required:Object(p["requiredIf"])((function(e){return e.type!=w["i"]}))}},quiz:{questions:{required:p["required"],minLength:Object(p["minLength"])(1),maxLength:Object(p["maxLength"])(100)}}},watch:{"question.type":function(){this.question.answer&&(this.question.answer=null)}},computed:{oldQuiz:function(){return this.$store.state.Course.oneQuiz},isUpdate:function(){return!!this.oldQuiz&&!!this.oldQuiz._id},section:function(){return this.$store.state.Course.oneSection},isQuestionChoises:function(){return this.question.type==w["g"]},isQuestionComplete:function(){return this.question.type==w["h"]},isQuestionEssay:function(){return this.question.type==w["i"]},isQuestionTrueOrFalse:function(){return this.question.type==w["k"]},QUESTION_TYPES_STR:function(){return w["l"]}},methods:{addQuestion:function(){if(this.$v.question.$touch(),!this.$v.question.$invalid){if(this.question.type==w["h"]){var e=this.question.text.match(/\.\.+/g);if(!e)return this.setGlobalError('The question complete must contain at least two dots(..). like as "How .. you ?"');if(this.question.answer.length!=e.length){var t=e.length>1?"are":"is";return this.setGlobalError("Question has ".concat(this.question.answer.length," answers, but ").concat(e.length," ").concat(t," required"))}}if(this.question.type==w["g"]&&!this.question.choices.includes(this.question.answer))return this.setGlobalError("The Question answer must be exits in choices");this.isQuestionUpdate=!1,this.quiz.questions.push(this.question),this.resetQuestion(),this.$v.$reset()}},fillToUpdateQuestion:function(e){this.isQuestionUpdate=!0,this.question=Object(l["a"])({},e),this.removeQuestion(e)},removeQuestion:function(e){this.quiz.questions=this.quiz.questions.filter((function(t){return e!=t}))},resetQuestion:function(){this.question={text:null,type:w["i"],choices:[]}},handleSave:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var n,i,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e.preventDefault(),t.$v.quiz.$touch(),!t.$v.quiz.$invalid){s.next=4;break}return s.abrupt("return");case 4:if(s.prev=4,t.setLoading(!0),!t.isUpdate){s.next=13;break}return i=t.lectureQuiz?"Course/updateQuiz":"Course/updateSectionQuiz",s.next=10,t.$store.dispatch(i,t.quiz);case 10:n=s.sent,s.next=17;break;case 13:return o=t.lectureQuiz?"Course/createQuiz":"Course/createSectionQuiz",s.next=16,t.$store.dispatch(o,t.quiz);case 16:n=s.sent;case 17:t.setGlobalSuccess(n.msg),t.$bvModal.hide("quizForm"),s.next=23;break;case 21:s.prev=21,s.t0=s["catch"](4);case 23:t.setLoading(!1);case 24:case"end":return s.stop()}}),s,null,[[4,21]])})))()},modalIsShown:function(){var e=this;setTimeout((function(){var t;return null===(t=e.$refs.textInput)||void 0===t?void 0:t.focus()}),400),this.isUpdate&&(this.quiz=Object(l["a"])({},this.oldQuiz))},resetModal:function(){this.$v.$reset(),this.removeAllErrors(),this.quiz={questions:[]}}}}),$=y,q=(s("4633"),Object(v["a"])($,C,k,!1,null,null,null)),_=q.exports,L=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{attrs:{"no-close-on-backdrop":e.isLoading,"no-close-on-esc":e.isLoading,id:"questionForm","hide-footer":"",size:"xl"},on:{hidden:e.resetModal,ok:e.handleSave,show:e.modalIsShown},scopedSlots:e._u([{key:"modal-header",fn:function(t){var n=t.close;return[s("div",{staticClass:"d-flex align-items-center justify-content-between w-100"},[s("div",{staticClass:"d-flex align-items-center"},[e.isUpdate?[s("h6",{staticClass:"mb-0"},[e._v("Update Question")])]:[s("h6",{staticClass:"mb-0"},[e._v("Create Question")])]],2),s("b-button",{attrs:{disabled:e.isLoading,size:"sm",variant:"outline-danger"},on:{click:function(e){return n()}}},[e._v(" Close ")])],1)]}},{key:"default",fn:function(t){var n=t.ok;return[s("b-form",{on:{submit:function(e){return e.preventDefault(),n()}}},[s("b-form-group",{attrs:{label:"Question","label-for":"text"}},[s("b-form-input",{ref:"textInput",attrs:{disabled:e.isLoading,id:"text"},model:{value:e.question.text,callback:function(t){e.$set(e.question,"text",t)},expression:"question.text"}}),s("input-error",{attrs:{vuelidate:e.$v.question.text,field:"text",namespace:e.namespace}})],1),s("b-form-group",{attrs:{label:"Question Type","label-for":"type"}},[s("b-form-select",{attrs:{disabled:e.isLoading,id:"type",options:e.questionTypes},model:{value:e.question.type,callback:function(t){e.$set(e.question,"type",t)},expression:"question.type"}}),s("input-error",{attrs:{vuelidate:e.$v.question.type,field:"type",namespace:e.namespace}})],1),e.isQuestionChoises?s("b-form-group",{attrs:{label:"Question Choices","label-for":"choices"}},[s("b-form-tags",{attrs:{disabled:e.isLoading,"input-id":"choices",placeholder:"","tag-variant":"blue"},model:{value:e.question.choices,callback:function(t){e.$set(e.question,"choices",t)},expression:"question.choices"}}),s("input-error",{attrs:{vuelidate:e.$v.question.choices,field:"choices",namespace:e.namespace}})],1):e._e(),e.isQuestionEssay||e.$v.question.text.$invalid?e._e():s("b-form-group",{attrs:{label:"Question Answer","label-for":"answer"}},[e.isQuestionComplete?s("b-form-tags",{attrs:{disabled:e.isLoading,"input-id":"answer",placeholder:"","tag-variant":"blue"},model:{value:e.question.answer,callback:function(t){e.$set(e.question,"answer",t)},expression:"question.answer"}}):e.isQuestionTrueOrFalse?s("b-form-radio-group",{staticClass:"d-flex",attrs:{options:[!0,!1],disabled:e.isLoading},model:{value:e.question.answer,callback:function(t){e.$set(e.question,"answer",t)},expression:"question.answer"}}):s("b-form-input",{attrs:{disabled:e.isLoading,id:"answer"},model:{value:e.question.answer,callback:function(t){e.$set(e.question,"answer",t)},expression:"question.answer"}}),s("input-error",{attrs:{vuelidate:e.$v.question.answer,field:"answer",namespace:e.namespace}})],1),s("div",{staticClass:"text-right"},[s("b-overlay",{staticClass:"d-inline-block",attrs:{show:e.isLoading,rounded:"",opacity:"0.6","spinner-small":"","spinner-variant":"primary"}},[e.isUpdate?s("b-btn",{attrs:{disabled:e.isLoading,variant:"outline-success"},on:{click:function(e){return n()}}},[e._v("Update")]):s("b-btn",{attrs:{disabled:e.isLoading,variant:"outline-primary"},on:{click:function(e){return n()}}},[e._v("Save")])],1)],1)],1)]}}])})},S=[],Q=s("53ca"),z={props:["lectureQuiz"],data:function(){return{namespace:"Course",questionTypes:[{text:w["l"][w["h"]],value:w["h"]},{text:w["l"][w["g"]],value:w["g"]},{text:w["l"][w["k"]],value:w["k"]},{text:w["l"][w["i"]],value:w["i"]},{text:w["l"][w["j"]],value:w["j"]}],question:{text:null,type:w["i"],choices:[],answer:null}}},validations:{question:{text:{required:p["required"],minLength:Object(p["minLength"])(3),maxLength:Object(p["maxLength"])(255)},type:{numeric:p["numeric"]},choices:{required:Object(p["requiredIf"])((function(e){return e.type==w["g"]})),minLength:Object(p["minLength"])(2)},answer:{required:Object(p["requiredIf"])((function(e){return e.type!=w["i"]}))}}},watch:{"question.type":function(e){var t=this.oldQuestion.answer,s=function(e){return Object(Q["a"])(t)===e?t:null};switch(this.question.choices=[],e){case w["h"]:this.question.answer=Array.isArray(t)?t:[];break;case w["g"]:this.question.answer=s("string"),this.question.choices=this.oldQuestion.choices||[];break;case w["k"]:this.question.answer=s("boolean");break;case w["i"]:this.question.answer=s("string");break;case w["j"]:this.question.answer=s("string");break}}},computed:{oldQuestion:function(){return this.$store.state.Course[this.lectureQuiz?"oneQuestion":"oneSectionQuestion"]},isUpdate:function(){return!!this.oldQuestion&&!!this.oldQuestion._id},isQuestionChoises:function(){return this.question.type==w["g"]},isQuestionComplete:function(){return this.question.type==w["h"]},isQuestionEssay:function(){return this.question.type==w["i"]},isQuestionTrueOrFalse:function(){return this.question.type==w["k"]},QUESTION_TYPES_STR:function(){return w["l"]}},methods:{handleSave:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var n,i,o,a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e.preventDefault(),t.$v.question.$touch(),!t.$v.question.$invalid){s.next=4;break}return s.abrupt("return");case 4:if(t.question.type!=w["h"]){s.next=11;break}if(n=t.question.text.match(/\.\.+/g),n){s.next=8;break}return s.abrupt("return",t.setGlobalError('The question complete must contain at least two dots(..). like as "How .. you ?"'));case 8:if(t.question.answer.length==n.length){s.next=11;break}return i=n.length>1?"are":"is",s.abrupt("return",t.setGlobalError("Question has ".concat(t.question.answer.length," answers, but ").concat(n.length," ").concat(i," required")));case 11:if(t.question.type!=w["g"]){s.next=14;break}if(t.question.choices.includes(t.question.answer)){s.next=14;break}return s.abrupt("return",t.setGlobalError("The Question answer must be exits in choices"));case 14:if(s.prev=14,t.setLoading(!0),!t.isUpdate){s.next=23;break}return a=t.lectureQuiz?"Course/updateQuestion":"Course/updateSectionQuestion",s.next=20,t.$store.dispatch(a,t.question);case 20:o=s.sent,s.next=27;break;case 23:return r=t.lectureQuiz?"Course/createQuestion":"Course/createSectionQuestion",s.next=26,t.$store.dispatch(r,t.question);case 26:o=s.sent;case 27:t.setGlobalSuccess(o.msg),t.$bvModal.hide("questionForm"),t.resetModal(),s.next=34;break;case 32:s.prev=32,s.t0=s["catch"](14);case 34:t.setLoading(!1);case 35:case"end":return s.stop()}}),s,null,[[14,32]])})))()},modalIsShown:function(){var e=this;setTimeout((function(){return e.$refs.textInput.focus()}),400),this.isUpdate&&(this.question=Object(l["a"])({},this.oldQuestion))},resetModal:function(){this.$v.$reset(),this.removeAllErrors(),this.question={text:null,type:w["i"],choices:[],answer:null}}}},j=z,M=(s("5153"),Object(v["a"])(j,L,S,!1,null,null,null)),O=M.exports,R=s("2490"),U={components:{QuizForm:_,QuestionForm:O,DeleteFieldModal:R["a"]},props:["lectureQuiz"],data:function(){return{namespace:"Course"}},computed:{quiz:function(){return this.lectureQuiz?this.lecture.quiz:this.section.quiz},lecture:function(){return this.$store.state.Course.oneLecture},section:function(){return this.$store.state.Course.oneSection},QUESTION_TYPES_STR:function(){return w["l"]}},methods:{createQuiz:function(){var e=this.lectureQuiz?"Course/setQuiz":"Course/setSectionQuiz";this.$store.commit(e,{}),this.$bvModal.show("quizForm")},createQuestion:function(){this.setQuestion({}),this.$bvModal.show("questionForm")},updateQuestion:function(e){this.setQuestion(e),this.$bvModal.show("questionForm")},removeQuestion:function(e){this.setQuestion(e),this.$bvModal.show("removeQuestionModal")},setQuestion:function(e){var t=this.lectureQuiz?"Course/setQuestion":"Course/setSectionQuestion";this.$store.commit(t,e)},handleRemoveQuestion:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,s=e.lectureQuiz?"Course/removeQuestion":"Course/removeSectionQuestion",t.next=4,e.$store.dispatch(s);case 4:n=t.sent,e.setGlobalSuccess(n.msg),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:e.$bvModal.hide("removeQuestionModal");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},T=U,F=(s("5d46"),Object(v["a"])(T,g,x,!1,null,null,null)),I=F.exports,V=s("e9b8"),E=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{attrs:{id:"lectureVideoForm","hide-footer":"",size:"lg"},on:{hidden:e.resetModal,ok:e.handleSave,show:e.modalIsShown},scopedSlots:e._u([{key:"modal-header",fn:function(t){var n=t.close;return[s("div",{staticClass:"d-flex align-items-center justify-content-between w-100"},[s("div",{staticClass:"d-flex align-items-center"},[[s("h6",{staticClass:"mb-0"},[e._v(e._s(e.isChange?"Change":"Upload")+" lecture video for:  ")]),s("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:e.lecture.title,expression:"lecture.title"}],staticClass:"font-sm font-weight-700"},[e._v(e._s(e._f("strLength")(e.lecture.title,30)))])]],2),s("b-button",{attrs:{size:"sm",variant:"outline-danger"},on:{click:function(e){return n()}}},[e._v(" Close ")])],1)]}},{key:"default",fn:function(t){var n=t.ok;return[s("b-form",{on:{submit:function(t){return t.preventDefault(),e.handleSave.apply(null,arguments)}}},[s("b-form-group",{attrs:{label:"Lecture Video","label-for":"video"}},[s("b-form-file",{attrs:{id:"video"},on:{input:e.handleVideo},model:{value:e.video,callback:function(t){e.video=t},expression:"video"}}),s("input-error",{attrs:{vuelidate:e.$v.video,field:"video",namespace:e.namespace}})],1),e.video?s("video",{ref:"videoReview",staticClass:"video-review",attrs:{controls:""}},[e._v("Your browser does not support the video tag.")]):e._e(),s("div",{staticClass:"text-right"},[e.isUpdate?s("b-btn",{attrs:{variant:"outline-success"},on:{click:function(e){return n()}}},[e._v("Update")]):s("b-btn",{attrs:{variant:"outline-primary"},on:{click:function(e){return n()}}},[e._v("Save")])],1)],1)]}}])})},D=[],A=(s("1276"),s("b0c0"),s("d3b7"),s("3ca3"),s("ddb0"),s("2b3d"),{props:["isChange"],data:function(){return{namespace:"Course",video:null,accept:["mp4","m3u8","rmvb","avi","swf","3gp","mkv","flv"],newUpload:{id:null,title:null,imgSrc:null,progress:0,status:"progress"}}},validations:{video:{required:p["required"]}},computed:{isUpdate:function(){return!!this.oldLecture&&!!this.oldLecture._id},uploads:function(){return this.$store.state.uploads},lecture:function(){return this.$store.state.Course.oneLecture}},methods:{handleSave:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var n,i,o,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e.preventDefault(),t.$v.$touch(),!t.$v.$invalid){s.next=4;break}return s.abrupt("return");case 4:if(n={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){var s=!0;s&&(t.$bvModal.hide("lectureVideoForm"),s=!1);var n=+Math.round(100*e.loaded/e.total);t.newUpload.progress=n,t.$store.commit("setUploadProgress",t.newUpload)}},i=new FormData,i.set("video",t.video),o={formData:i,config:n},t.newUpload.title=t.lecture.title,t.$store.commit("setUpload",t.newUpload),s.prev=10,!t.isChange){s.next=17;break}return s.next=14,t.$store.dispatch("Course/changeLectureVideo",o);case 14:a=s.sent,s.next=20;break;case 17:return s.next=19,t.$store.dispatch("Course/uploadLectureVideo",o);case 19:a=s.sent;case 20:t.$store.commit("setUploadStatus",Object(l["a"])(Object(l["a"])({},t.newUpload),{},{status:"success"})),t.$bvModal.hide("lectureVideoForm"),t.setGlobalSuccess(a.msg),s.next=29;break;case 25:s.prev=25,s.t0=s["catch"](10),s.t0&&console.log(s.t0),t.$store.commit("setUploadStatus",Object(l["a"])(Object(l["a"])({},t.newUpload),{},{status:"error"}));case 29:case"end":return s.stop()}}),s,null,[[10,25]])})))()},handleVideo:function(e){var t=this;if(e){var s=e.name.split("."),n=s[s.length-1];if(!this.accept.includes(n))return this.video=null,this.setGlobalError("Video is not valid");var i=URL.createObjectURL(e);setTimeout((function(){var e=t.$refs.videoReview;e.src=i;var s=t;e.onloadeddata=function(){setTimeout((function(){var t=document.createElement("canvas");t.width=e.videoWidth,t.height=e.videoHeight,t.getContext("2d").drawImage(e,0,0,t.width,t.height);var n=t.toDataURL();s.newUpload.id=s.uploads.length+1,s.newUpload.imgSrc=n}),500)}}),500)}},modalIsShown:function(){},resetModal:function(){this.$v.$reset(),this.removeAllErrors(),this.video=null,this.$emit("closed")}}}),N=A,P=(s("d851"),Object(v["a"])(N,E,D,!1,null,null,null)),B=P.exports,G={components:{LectureForm:b,LectureVideo:V["a"],LectureVideoForm:B,Quiz:I,DeleteFieldModal:R["a"]},data:function(){return{isChangeVideo:!1,lectureQuiz:!0}},computed:{course:function(){return this.$store.state.Course.one},section:function(){return this.$store.state.Course.oneSection},lecture:function(){return this.$store.state.Course.oneLecture}},methods:{showLectureActions:function(e,t){this.$store.commit("Course/setLecture",e),this.$store.commit("Course/setSection",t)},showSectionActions:function(e){this.$store.commit("Course/setSection",e)},createSection:function(){this.$store.commit("Course/setSection",{}),this.$bvModal.show("sectionForm")},createLecture:function(e){this.$store.commit("Course/setSection",e),this.$store.commit("Course/setLecture",{}),this.$bvModal.show("lectureForm")},showLectureVideo:function(e){this.$store.commit("Course/setLecture",e),this.$bvModal.show("lectureVideo")},changeLectureVideo:function(){var e=this;this.isChangeVideo=!0,this.$nextTick((function(){e.$bvModal.show("lectureVideoForm")}))},showSectionQuiz:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("Course/setQuiz",{}),t.prev=1,t.next=4,e.$store.dispatch("Course/sectionQuiz");case 4:t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](1);case 8:e.lectureQuiz=!1,e.$nextTick((function(){e.$bvModal.show("quiz")}));case 10:case"end":return t.stop()}}),t,null,[[1,6]])})))()},showQuiz:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("Course/setQuiz",{}),t.prev=1,t.next=4,e.$store.dispatch("Course/quiz");case 4:t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](1);case 8:e.lectureQuiz=!0,e.$nextTick((function(){e.$bvModal.show("quiz")}));case 10:case"end":return t.stop()}}),t,null,[[1,6]])})))()},handleRemoveSection:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("Course/removeSection",e.section);case 3:s=t.sent,e.setGlobalSuccess(s.msg),t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:e.$bvModal.hide("removeSectionModal");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},handleRemoveLecture:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("Course/removeLecture",e.lecture);case 3:s=t.sent,e.setGlobalSuccess(s.msg),t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:e.$bvModal.hide("removeLectureModal");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},changeVideoReview:function(e,t){var s=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s.$store.commit("Course/setSection",t),s.$store.commit("Course/setLecture",e),n.prev=2,n.next=5,s.$store.dispatch("Course/changeLectureVideoReview",{videoReview:e.videoReview});case 5:i="Lecture video has been ".concat(e.videoReview?"enabled":"disabled"," sucessfully."),s.setGlobalSuccess(i),n.next=11;break;case 9:n.prev=9,n.t0=n["catch"](2);case 11:case"end":return n.stop()}}),n,null,[[2,9]])})))()}}},Y=G,H=Object(v["a"])(Y,a,r,!1,null,null,null),J=H.exports,W=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{attrs:{"no-close-on-backdrop":e.isLoading,"no-close-on-esc":e.isLoading,id:"sectionForm","hide-footer":"",size:"lg"},on:{hidden:e.resetModal,ok:e.handleSave,show:e.modalIsShown},scopedSlots:e._u([{key:"modal-header",fn:function(t){var n=t.close;return[s("div",{staticClass:"d-flex align-items-center justify-content-between w-100"},[s("div",{staticClass:"d-flex align-items-center"},[e.isUpdate?[s("h6",{staticClass:"mb-0"},[e._v("Update Section")])]:[s("h6",{staticClass:"mb-0"},[e._v("Create Section")])]],2),s("b-button",{attrs:{disabled:e.isLoading,size:"sm",variant:"outline-danger"},on:{click:function(e){return n()}}},[e._v(" Close ")])],1)]}},{key:"default",fn:function(t){var n=t.ok;return[s("b-form",{on:{submit:function(t){return t.preventDefault(),e.handleSave.apply(null,arguments)}}},[s("b-form-group",{attrs:{label:"Section Title","label-for":"title"}},[s("b-form-textarea",{attrs:{disabled:e.isLoading,id:"title"},model:{value:e.section.title,callback:function(t){e.$set(e.section,"title",t)},expression:"section.title"}}),s("input-error",{attrs:{vuelidate:e.$v.section.title,field:"title",namespace:e.namespace}})],1),s("div",{staticClass:"text-right"},[s("b-overlay",{staticClass:"d-inline-block",attrs:{show:e.isLoading,rounded:"",opacity:"0.6","spinner-small":"","spinner-variant":"primary"}},[e.isUpdate?s("b-btn",{attrs:{disabled:e.isLoading,variant:"outline-success"},on:{click:function(e){return n()}}},[e._v("Update")]):s("b-btn",{attrs:{disabled:e.isLoading,variant:"outline-primary"},on:{click:function(e){return n()}}},[e._v("Save")])],1)],1)],1)]}}])})},K=[],X={data:function(){return{namespace:"Course",section:{title:null}}},validations:{section:{title:{required:p["required"],minLength:Object(p["minLength"])(3),maxLength:Object(p["maxLength"])(54)}}},computed:{oldSection:function(){return this.$store.state.Course.oneSection},isUpdate:function(){return!!this.oldSection&&!!this.oldSection._id}},methods:{handleSave:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e.preventDefault(),t.$v.$touch(),!t.$v.$invalid){s.next=4;break}return s.abrupt("return");case 4:if(s.prev=4,t.setLoading(!0),!t.isUpdate){s.next=12;break}return s.next=9,t.$store.dispatch("Course/updateSection",t.section);case 9:n=s.sent,s.next=15;break;case 12:return s.next=14,t.$store.dispatch("Course/createSection",t.section);case 14:n=s.sent;case 15:t.$bvModal.hide("sectionForm"),t.setGlobalSuccess(n.msg),t.$nextTick((function(){t.$bvModal.show("sections")})),s.next=23;break;case 20:s.prev=20,s.t0=s["catch"](4),s.t0&&console.log(s.t0);case 23:t.setLoading(!1);case 24:case"end":return s.stop()}}),s,null,[[4,20]])})))()},modalIsShown:function(){var e=this;setTimeout((function(){var t;return null===(t=e.$refs.titleInput)||void 0===t?void 0:t.focus()}),400),this.isUpdate&&(this.section=Object(l["a"])({},this.oldSection))},resetModal:function(){this.$v.$reset(),this.removeAllErrors(),this.section.title=null,this.$emit("closed")}}},Z=X,ee=Object(v["a"])(Z,W,K,!1,null,null,null),te=ee.exports,se=s("17cc"),ne=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{attrs:{id:"approveFieldModal","body-class":"p-0","hide-footer":"","hide-header":"",centered:"","no-close-on-backdrop":e.btnLoading,"no-close-on-esc":e.btnLoading},on:{hide:function(t){e.btnLoading=!1}}},[s("div",{staticClass:"modal-approve"},[s("div",{staticClass:"modal-icon"},[s("i",{staticClass:"fa fa-check"})]),s("p",{staticClass:"modal-msg py-4"},[e._t("msg",(function(){return[e._v(" "+e._s(e.msg)+" ")]}))],2),s("div",{staticClass:"modal-btn-action d-flex justify-content-center"},[e.btnLoading?s("b-btn",{staticClass:"mx-1",attrs:{disabled:"",size:"md",variant:"danger"}},[e._v(" Loading... "),s("b-spinner",{attrs:{type:"grow",small:""}})],1):s("b-btn",{staticClass:"mx-1",attrs:{size:"md",variant:"danger"},on:{click:e.done}},[e._v(" Ok ")]),s("b-btn",{staticClass:"mx-1",attrs:{size:"md",variant:"blue",disabled:e.btnLoading},on:{click:function(t){return e.$bvModal.hide("approveFieldModal")}}},[e._v(" No ")])],1)])])},ie=[],oe={props:["msg"],data:function(){return{btnLoading:!1}},methods:{done:function(){this.btnLoading=!0,this.$emit("done")}}},ae=oe,re=(s("27bd"),Object(v["a"])(ae,ne,ie,!1,null,null,null)),ce=re.exports,ue={mixins:[se["a"]],components:{Sections:J,SectionForm:te,ApproveFieldModal:ce,DeleteFieldModal:R["a"]},data:function(){return{namespace:"Course",fields:[{key:"thumbnail",lable:"Title",sortable:!0},{key:"title",lable:"Title",sortable:!0},{key:"status",lable:"Status",sortable:!0},{key:"category",lable:"Category",sortable:!0},{key:"studentsCount",lable:"Students Count",sortable:!0,tdClass:"pl-xl-5"},{key:"level",lable:"Level",sortable:!0},{key:"langMadeIn",lable:"Language Made In",sortable:!0},{key:"createdBy",lable:"Created By",sortable:!0},{key:"actions",lable:"Actions"}],course:{}}},computed:{courseIsApproved:function(){return this.course.status===w["b"]},approveMsg:function(){return this.courseIsApproved?"Are you sure to Refusal to approve this course ?":"Are you sure to Approve this course ?"}},methods:{showSections:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,t.$store.commit("Course/setOne",e),s.next=4,t.$store.dispatch("Course/sections");case 4:s.next=8;break;case 6:s.prev=6,s.t0=s["catch"](0);case 8:t.$nextTick((function(){t.$bvModal.show("sections")}));case 9:case"end":return s.stop()}}),s,null,[[0,6]])})))()},createSection:function(e){this.$store.commit("Course/setOne",e),this.$store.commit("Course/setSection",{}),this.$bvModal.show("sectionForm")},showActions:function(e){this.course=e,this.$bvModal.show("dropdownActionModal")},changeStatusCourse:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("Course/changeStatus",e.course);case 3:e.$nextTick((function(){e.$bvModal.hide("approveFieldModal"),e.$bvModal.hide("dropdownActionModal")})),t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))()},removeCourse:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("Course/remove",e.course);case 3:e.$nextTick((function(){e.$bvModal.hide("deleteCourseModal"),e.$bvModal.hide("dropdownActionModal")})),t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}},le=ue,de=Object(v["a"])(le,n,i,!1,null,"51a31373",null);t["default"]=de.exports},4468:function(e,t,s){},4633:function(e,t,s){"use strict";s("d77a")},"466d":function(e,t,s){"use strict";var n=s("d784"),i=s("825a"),o=s("50c4"),a=s("577e"),r=s("1d80"),c=s("8aa5"),u=s("14c3");n("match",(function(e,t,s){return[function(t){var s=r(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,s):new RegExp(t)[e](a(s))},function(e){var n=i(this),r=a(e),l=s(t,n,r);if(l.done)return l.value;if(!n.global)return u(n,r);var d=n.unicode;n.lastIndex=0;var p,m=[],h=0;while(null!==(p=u(n,r))){var v=a(p[0]);m[h]=v,""===v&&(n.lastIndex=c(r,o(n.lastIndex),d)),h++}return 0===h?null:m}]}))},"47f0":function(e,t,s){},5153:function(e,t,s){"use strict";s("0fe2")},"5d46":function(e,t,s){"use strict";s("33ca")},"78d1":function(e,t,s){},"841c":function(e,t,s){"use strict";var n=s("d784"),i=s("825a"),o=s("1d80"),a=s("129f"),r=s("577e"),c=s("14c3");n("search",(function(e,t,s){return[function(t){var s=o(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,s):new RegExp(t)[e](r(s))},function(e){var n=i(this),o=r(e),u=s(t,n,o);if(u.done)return u.value;var l=n.lastIndex;a(l,0)||(n.lastIndex=0);var d=c(n,o);return a(n.lastIndex,l)||(n.lastIndex=l),null===d?-1:d.index}]}))},d77a:function(e,t,s){},d851:function(e,t,s){"use strict";s("47f0")},e9b8:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{attrs:{id:"lectureVideo","hide-footer":"",size:"xl",centered:"","body-class":"p-0"},on:{hidden:function(t){return e.$emit("closed")}},scopedSlots:e._u([{key:"modal-header",fn:function(t){var n=t.close;return[s("div",{staticClass:"d-flex align-items-center justify-content-between w-100"},[s("div",{staticClass:"d-flex align-items-center"},[s("h6",{staticClass:"mb-0"},[e._v(" Lecture:  "),s("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:e.lecture.title,expression:"lecture.title"}],staticClass:"font-sm font-weight-700"},[e._v(e._s(e._f("strLength")(e.lecture.title,30)))])])]),s("b-button",{attrs:{size:"sm",variant:"outline-danger"},on:{click:function(e){return n()}}},[e._v(" Close ")])],1)]}},{key:"default",fn:function(){return[s("video",{ref:"videoReview",staticClass:"video-review d-flex w-100",attrs:{controls:"",src:e.lecturesURL+"/"+e.lecture.video}},[e._v(" Your browser does not support the video tag. ")])]},proxy:!0}])})},i=[],o={computed:{lecture:function(){return this.$store.state.Course.oneLecture}}},a=o,r=s("2877"),c=Object(r["a"])(a,n,i,!1,null,"46bf77a4",null);t["a"]=c.exports}}]);
//# sourceMappingURL=Courses.86a995c0.js.map