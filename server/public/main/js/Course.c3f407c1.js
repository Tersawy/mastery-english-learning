(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Course"],{"0c05":function(t,e,n){"use strict";n("d371")},"0ccb":function(t,e,n){var s=n("50c4"),i=n("577e"),r=n("1148"),a=n("1d80"),o=Math.ceil,c=function(t){return function(e,n,c){var u,l,d=i(a(e)),f=d.length,h=void 0===c?" ":i(c),p=s(n);return p<=f||""==h?d:(u=p-f,l=r.call(h,o(u/h.length)),l.length>u&&(l=l.slice(0,u)),t?d+l:l+d)}};t.exports={start:c(!1),end:c(!0)}},1148:function(t,e,n){"use strict";var s=n("a691"),i=n("577e"),r=n("1d80");t.exports=function(t){var e=i(r(this)),n="",a=s(t);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(n+=e);return n}},"2d54":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.course?n("div",{staticClass:"course-header-area"},[n("b-container",{attrs:{fluid:"lg"}},[n("b-row",[n("b-col",{attrs:{lg:"8"}},[n("div",{staticClass:"course-header-wrap"},[n("h1",{staticClass:"title d-none d-lg-block"},[t._v(t._s(t.course.title))]),n("h3",{staticClass:"title d-lg-none"},[t._v(t._s(t.course.title))]),n("p",{staticClass:"subtitle"},[t._v(t._s(t.course.short_description))]),n("div",{staticClass:"rating-row"},[n("span",{staticClass:"course-badge best-seller"},[t._v("beginner")]),n("span",{staticClass:"enrolled-num"},[t._v(" "+t._s(t.course.studentsCount)+" Students enrolled ")])]),n("div",{staticClass:"created-row"},[n("span",{staticClass:"last-updated-date"},[t._v("Last updated "+t._s(t._f("date")(t.course.updatedAt)))]),n("span",{staticClass:"comment"},[n("i",{staticClass:"fas fa-comment",attrs:{"aria-hidden":"true"}}),n("span",[t._v(" arabic")])])])])])],1)],1)],1):t._e(),n("div",{staticClass:"course-content-area py-5"},[n("b-container",{attrs:{fluid:"lg"}},[n("b-row",[n("b-col",{attrs:{lg:"8"}},[n("div",{staticClass:"course-content pb-4"},[n("h4",{staticClass:"mb-3 font-weight-700"},[t._v("Course content")]),n("div",{staticClass:"d-flex align-items-center justify-content-between mb-2"},[n("p",{staticClass:"mb-0 font-md"},[t._v(" "+t._s(+t.course.sections.length)+" sections • "+t._s(t.lecturesCount)+" lectures • "+t._s(t.lecturesTime(t.course.time).timeStr)+" total length ")]),n("b-btn",{attrs:{size:"sm",variant:"teal"},on:{click:t.expandAll}},[t.allExpanded?n("span",[t._v(" Collapse All ")]):n("span",[t._v(" Expand All ")])])],1),n("div",{staticClass:"course-content-sections"},t._l(t.course.sections,(function(e,s){return n("b-card",{key:s,attrs:{"no-body":""}},[n("b-card-body",{staticClass:"p-3 d-flex justify-content-between c-pointer",on:{click:function(t){e.lecturesVisible=!e.lecturesVisible}}},[n("div",{staticClass:"d-flex align-items-center"},[n("b-icon",{attrs:{icon:"chevron-"+(e.lecturesVisible?"up":"down")}}),n("span",{staticClass:"mx-2 font-weight-600"},[t._v(t._s(e.title))])],1),n("span",{staticClass:"font-md"},[t._v(" "+t._s(e.lectures.length)+" lectures • "+t._s(t.lecturesTime(e.time).timeStr)+" ")])]),n("b-collapse",{model:{value:e.lecturesVisible,callback:function(n){t.$set(e,"lecturesVisible",n)},expression:"section.lecturesVisible"}},[n("b-card-footer",{staticClass:"p-0 border-0"},t._l(e.lectures,(function(e,s){return n("div",{key:s,staticClass:"d-flex align-items-center justify-content-between p-3 font-md"},[n("div",[n("span",{staticStyle:{"font-size":"18px"}},[e.video?n("b-icon",{staticClass:"rounded-circle bg-dark p-1 c-pointer",attrs:{icon:"caret-right-fill",variant:"white"},on:{click:function(n){return t.showLectureVideo(e)}}}):n("b-icon",{staticClass:"rounded-circle bg-dark p-1",attrs:{icon:"dash-circle",scale:"2",variant:"white"}})],1),e.video?n("span",{staticClass:"mx-2 text-primary c-pointer",staticStyle:{"text-decoration":"underline"},on:{click:function(n){return t.showLectureVideo(e)}}},[t._v(" "+t._s(e.title)+" ")]):n("span",{staticClass:"mx-2"},[t._v(t._s(e.title))]),n("b-icon",{staticClass:"c-pointer",attrs:{icon:"chevron-"+(e.descriptionVisible?"up":"down"),variant:"dark"},on:{click:function(t){e.descriptionVisible=!e.descriptionVisible}}}),n("b-collapse",{model:{value:e.descriptionVisible,callback:function(n){t.$set(e,"descriptionVisible",n)},expression:"lecture.descriptionVisible"}},[n("p",{staticClass:"text-muted pl-4 mt-1 mb-0 font-md"},[t._v(t._s(e.description))])])],1),n("div",[t._v(t._s(t.lecturesTime(e.time).timeNum))])])})),0)],1)],1)})),1)]),n("div",{staticClass:"course-requirments py-4"},[n("h4",{staticClass:"mb-3 font-weight-700"},[t._v("Requirements")]),n("div",{staticClass:"requirments-content font-md"},[n("ul",t._l(t.course.requirements,(function(e,s){return n("li",{key:s},[t._v(" "+t._s(e)+" ")])})),0)])]),n("div",{staticClass:"course-description py-4"},[n("h4",{staticClass:"mb-3 font-weight-700"},[t._v("Description")]),n("div",{staticClass:"description-content font-md",domProps:{innerHTML:t._s(t.course.description)}})])]),n("b-col",{attrs:{lg:"4"}},[n("div",{staticClass:"course-sidebar natural"},[n("div",{staticClass:"preview-video-box"},[t.course.thumbnail?n("img",{staticClass:"img-fluid w-100",attrs:{src:t.thumbnailsURL+"/"+t.course.thumbnail}}):t._e()]),n("div",{staticClass:"course-sidebar-text-box"},[n("div",{staticClass:"buy-btns"},[!t.isAuth||t.isStudent?n("div",[t.course.isEnrolled?n("b-btn",{staticClass:"btn-enroll enrolled",attrs:{to:"/courses/"+t.course._id+"/start"}},[n("b-icon",{attrs:{icon:"check2-circle"}}),n("span",[t._v(" Start Learning now ")])],1):n("b-btn",{staticClass:"btn-enroll",on:{click:t.enroll}},[t._v("Enroll")])],1):n("b-btn",{staticClass:"btn-enroll",attrs:{disabled:""}},[t._v("Enroll")])],1)])])])],1)],1)],1),n("LectureVideo")],1)},i=[],r=n("1da1"),a=(n("96cf"),n("159b"),n("4e3e")),o=n("e9b8"),c={components:{LectureVideo:o["a"]},data:function(){return{allExpanded:!1}},mounted:function(){this.getCourse()},computed:{course:function(){return this.$store.state.Course.one},lecturesCount:function(){var t,e;return null===(t=this.course)||void 0===t||null===(e=t.sections)||void 0===e?void 0:e.reduce((function(t,e){return t+=e.lectures.length,t}),0)}},watch:{allExpanded:function(t){var e,n;null===(e=this.course)||void 0===e||null===(n=e.sections)||void 0===n||n.forEach((function(e){e.lecturesVisible=t,t||e.lectures.forEach((function(e){e.descriptionVisible=t}))}))}},methods:{getCourse:function(){return this.$store.dispatch("Course/show",this.$route.params.courseId)},expandAll:function(){this.allExpanded=!this.allExpanded},lecturesTime:function(t){return Object(a["a"])(t)},showLectureVideo:function(t){this.$store.commit("Course/setLecture",t),this.$bvModal.show("lectureVideo")},enroll:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("Student/enroll",t.course);case 3:n=e.sent,n.msg&&t.setGlobalSuccess(n.msg),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}}},u=c,l=(n("be80"),n("2877")),d=Object(l["a"])(u,s,i,!1,null,"a1772bc6",null);e["default"]=d.exports},"391e":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.course?n("div",{staticClass:"start-learning"},[n("b-container",{staticClass:"px-lg-4",attrs:{fluid:""}},[n("b-breadcrumb",{staticClass:"bg-white border rounded shadow-sm font-weight-600 my-30px"},[n("b-breadcrumb-item",{attrs:{to:"/dashboard"}},[n("b-icon",{staticClass:"mr-1",attrs:{icon:"house-fill",scale:"1.25","shift-v":"1.25","aria-hidden":"true"}}),t._v(" My Courses ")],1),n("b-breadcrumb-item",{attrs:{active:""}},[t._v(" "+t._s(t.course.title)+" ")])],1),n("b-row",[n("b-col",{attrs:{cols:"8"}},[t.lecture.video?n("div",{},[n("video",{ref:"video",staticClass:"w-100",staticStyle:{"background-color":"#000"},attrs:{src:t.lecturesURL+"/"+t.lecture.video,controls:""}})]):t._e(),n("div",{staticClass:"course-details my-30px"},[n("div",{staticClass:"user-details d-flex align-items-center"},[t.course.createdBy?n("b-avatar",{attrs:{src:t.userImageURL+"/"+t.course.createdBy.image}}):t._e(),n("span",{staticClass:"font-weight-700 mx-3"},[t._v(t._s(t._f("relation")(t.course.createdBy,"username")))])],1),n("div",{staticClass:"lecture-details ml-40px mt-2"},[n("div",{staticClass:"mx-3 text-muted"},[t._v(t._s(t._f("date")(t.lecture.createdAt)))]),n("div",{staticClass:"mx-3 mt-3"},[t._v(" "+t._s(t.lecture.description)+" ")])]),t.lecture.quiz&&t.lecture.quiz.questions&&t.lecture.quiz.questions.length?n("div",{staticClass:"lecture-quiz pt-3"},[n("h3",{staticClass:"mb-3",staticStyle:{"text-decoration":"underline"}},[t._v("Quiz :-")]),n("div",{staticClass:"questions ml-3"},[n("ul",{staticClass:"questions-list",staticStyle:{"list-style":"upper-latin"}},t._l(t.lecture.quiz.questions,(function(e,s){return n("li",{key:s,staticClass:"questions-item px-2 py-4"},[n("Question",{attrs:{question:e,formData:t.answers.formData}})],1)})),0),n("b-btn",{attrs:{variant:"primary"},on:{click:t.saveAnswers}},[t._v("Save")])],1)]):t._e()])]),n("b-col",{attrs:{cols:"4"}},[n("div",{staticClass:"d-flex align-items-center justify-content-between mb-2"},[n("p",{staticClass:"mb-0 font-md"},[t._v(" "+t._s(+t.course.sections.length)+" sections • "+t._s(t.lecturesCount)+" lectures • "+t._s(t.lecturesTime(t.course.time).timeStr)+" total length ")]),n("b-btn",{attrs:{size:"sm",variant:"teal"},on:{click:t.expandAll}},[t.allExpanded?n("span",[t._v(" Collapse All ")]):n("span",[t._v(" Expand All ")])])],1),n("div",{staticClass:"course-content-sections"},t._l(t.course.sections,(function(e,s){return n("b-card",{key:s,attrs:{"no-body":""}},[n("b-card-body",{staticClass:"p-3 d-flex justify-content-between c-pointer",on:{click:function(t){e.lecturesVisible=!e.lecturesVisible}}},[n("div",{staticClass:"d-flex align-items-center"},[n("b-icon",{attrs:{icon:"chevron-"+(e.lecturesVisible?"up":"down")}}),n("span",{staticClass:"mx-2 font-weight-600"},[t._v(t._s(e.title))])],1),n("span",{staticClass:"font-md"},[t._v(" "+t._s(e.lectures.length)+" lectures • "+t._s(t.lecturesTime(e.time).timeStr)+" ")])]),n("b-collapse",{model:{value:e.lecturesVisible,callback:function(n){t.$set(e,"lecturesVisible",n)},expression:"section.lecturesVisible"}},[n("b-card-footer",{staticClass:"p-0 border-0"},t._l(e.lectures,(function(e,s){return n("div",{key:s,staticClass:"d-flex align-items-center justify-content-between p-3 font-md"},[n("div",[n("span",{staticStyle:{"font-size":"18px"}},[e.video?n("b-icon",{staticClass:"rounded-circle bg-dark p-1 c-pointer",attrs:{icon:"caret-right-fill",variant:"white"},on:{click:function(n){return t.showLectureVideo(e)}}}):n("b-icon",{staticClass:"rounded-circle bg-dark p-1",attrs:{icon:"dash-circle",scale:"2",variant:"white"}})],1),e.video?n("span",{staticClass:"mx-2 text-primary c-pointer",staticStyle:{"text-decoration":"underline"},on:{click:function(n){return t.showLectureVideo(e)}}},[t._v(" "+t._s(e.title)+" ")]):n("span",{staticClass:"mx-2"},[t._v(t._s(e.title))]),n("b-icon",{staticClass:"c-pointer",attrs:{icon:"chevron-"+(e.descriptionVisible?"up":"down"),variant:"dark"},on:{click:function(t){e.descriptionVisible=!e.descriptionVisible}}}),n("b-collapse",{model:{value:e.descriptionVisible,callback:function(n){t.$set(e,"descriptionVisible",n)},expression:"lecture.descriptionVisible"}},[n("p",{staticClass:"text-muted pl-4 mt-1 mb-0 font-md"},[t._v(t._s(e.description))])])],1),n("div",[t._v(t._s(t.lecturesTime(e.time).timeNum))])])})),0)],1)],1)})),1)])],1)],1)],1):t._e()},i=[],r=n("1da1"),a=(n("96cf"),n("b64b"),n("159b"),n("4e3e")),o=(n("99af"),n("2909")),c=(n("ac1f"),n("1276"),n("466d"),n("cb29"),{props:["question"],render:function(t){var e=this,n=this.question.text,s=n.split(/\.\.+/gi),i=function(n,i,r){var a=r==s.length-1,c=[t("span",i)];return a||c.push(t("input",{class:"input-complete",attrs:{placeholder:".........................."},on:{input:function(t){t.target.style.width=9*((t.target.value.length||6)+1)+"px",e.value[r]=t.target.value,e.$emit("input",e.value)}}})),[].concat(Object(o["a"])(n),c)};return s=s.reduce(i,[]),t("div",{class:"question"},s)},data:function(){var t=this.question.text.match(/\.\.+/gi);return{value:Array(t.length).fill("")}}}),u={props:["question"],render:function(){var t=this,e=arguments[0];return e("div",{class:"question question-Choice d-flex flex-column align-items-start",style:"line-height: 1.5"},[e("span",[this.question.text]),e("b-form-radio-group",{attrs:{options:this.question.choices},class:"Choice-radio w-100 d-flex justify-content-around mt-3",on:{change:function(e){return t.$emit("input",e)}}})])}},l={props:["question"],render:function(){var t=this,e=arguments[0];return e("div",{class:"question question-true-or-false d-flex align-items-start justify-content-between",style:"line-height: 1.5"},[e("span",[this.question.text]),e("b-form-radio-group",{attrs:{options:[{text:"true",value:!0},{text:"false",value:!1}]},class:"d-flex",on:{change:function(e){return t.$emit("input",e)}}})])}},d={props:["question"],render:function(){var t=this,e=arguments[0];return e("div",{class:"question question-essay d-flex align-items-start justify-content-between",style:"line-height: 1.5"},[e("span",[this.question.text]),e("b-form-textarea",{class:"d-flex mt-3",on:{change:function(e){return t.$emit("input",e)}}})])}},f=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-right"},[t.isRecording?n("b-btn",{staticClass:"w-auto",attrs:{size:"sm",variant:"danger"},on:{click:t.stopRecording}},[t._v("Stop")]):n("b-btn",{staticClass:"w-auto",attrs:{size:"sm",variant:"success"},on:{click:t.startRecording}},[t._v("Record")])],1)}),h=[],p=n("c782"),v=n.n(p),b={data:function(){return{isRecording:!1,recorder:{},gumStream:{}}},mounted:function(){},methods:{startRecording:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new(window.AudioContext||window.webkitAudioContext),t.recorder=new v.a(n),e.prev=2,e.next=5,navigator.mediaDevices.getUserMedia({audio:!0});case 5:return s=e.sent,t.recorder.init(s),t.gumStream=s,e.next=10,t.recorder.start();case 10:t.isRecording=!0,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](2),t.isRecording=!1;case 16:case"end":return e.stop()}}),e,null,[[2,13]])})))()},stopRecording:function(){var t=this;this.isRecording=!1,this.gumStream.getAudioTracks()[0].stop(),this.recorder.stop().then((function(e){var n=e.blob;t.isRecording=!1,t.$emit("input",n)}))}}},m=b,g=n("2877"),w=Object(g["a"])(m,f,h,!1,null,"e965f13c",null),x=w.exports,C={props:["question"],components:{Recorder:x},render:function(){var t=arguments[0];return t("div",{class:"question question-speech flex-column align-items-start"},[t("div",{class:"d-flex w-100 align-items-center justify-content-between"},[t("span",[this.question.text]),t("recorder",{on:{input:this.handleRecorder}})]),this.audioSrc&&t("audio",{class:"mt-3 w-100",attrs:{controls:!0,src:this.audioSrc}})])},data:function(){return{audioSrc:null}},methods:{handleRecorder:function(t){this.audioSrc=URL.createObjectURL(t),this.$emit("input",t)}}},y=n("5b55"),_={props:["question","formData"],render:function(){var t=arguments[0];switch(this.question.type){case y["h"]:return t(c,{attrs:{question:this.question},on:{input:this.handleComplete}});case y["g"]:return t(u,{attrs:{question:this.question},on:{input:this.handleChoiceOne}});case y["k"]:return t(l,{attrs:{question:this.question},on:{input:this.handleTrueOrFalse}});case y["i"]:return t(d,{attrs:{question:this.question},on:{input:this.handleEssay}});case y["j"]:return t(C,{attrs:{question:this.question},on:{input:this.handleSpeech}})}},methods:{handleComplete:function(t){var e=this;t.forEach((function(t,n){e.formData.set("".concat(e.question._id,"[").concat(n,"]"),t)}))},handleChoiceOne:function(t){this.formData.set(this.question._id,t)},handleTrueOrFalse:function(t){this.formData.set(this.question._id,t)},handleEssay:function(t){this.formData.set(this.question._id,t)},handleSpeech:function(t){this.formData.set(this.question._id,t)}}},k={components:{Question:_},data:function(){return{allExpanded:!1,isListen:!1,answers:{formData:new FormData}}},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getCourse();case 2:n=0;case 3:if(!(n<t.course.sections.length)){e.next=19;break}if(t.course.sections[n].lectures.length){e.next=6;break}return e.abrupt("continue",16);case 6:s=0;case 7:if(!(s<t.course.sections[n].lectures.length)){e.next=14;break}if(!t.course.sections[n].lectures[s]){e.next=11;break}return t.showLectureVideo(t.course.sections[n].lectures[s]),e.abrupt("break",14);case 11:s++,e.next=7;break;case 14:if(!Object.keys(t.lecture).length){e.next=16;break}return e.abrupt("break",19);case 16:n++,e.next=3;break;case 19:case"end":return e.stop()}}),e)})))()},computed:{course:function(){return this.$store.state.Course.one},lecturesCount:function(){var t,e;return null===(t=this.course)||void 0===t||null===(e=t.sections)||void 0===e?void 0:e.reduce((function(t,e){return t+=e.lectures.length,t}),0)},lecture:function(){return this.$store.state.Course.oneLecture}},watch:{allExpanded:function(t){var e,n;null===(e=this.course)||void 0===e||null===(n=e.sections)||void 0===n||n.forEach((function(e){e.lecturesVisible=t,t||e.lectures.forEach((function(e){e.descriptionVisible=t}))}))}},methods:{getCourse:function(){return this.$store.dispatch("Course/show",this.$route.params.courseId)},expandAll:function(){this.allExpanded=!this.allExpanded},lecturesTime:function(t){return Object(a["a"])(t)},showLectureVideo:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.$store.commit("Course/setLecture",t),n.prev=1,n.next=4,e.$store.dispatch("Course/quiz");case 4:n.next=8;break;case 6:n.prev=6,n.t0=n["catch"](1);case 8:case"end":return n.stop()}}),n,null,[[1,6]])})))()},textFromSpeech:function(t){console.log("textFromSpeech: ",t)},saveAnswers:function(){console.log(this.answers.formData.get("1234"))}}},q=k,A=(n("0c05"),Object(g["a"])(q,s,i,!1,null,null,null));e["default"]=A.exports},"4d90":function(t,e,n){"use strict";var s=n("23e7"),i=n("0ccb").start,r=n("9a0c");s({target:"String",proto:!0,forced:r},{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"4e3e":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));n("a9e3"),n("4d90"),n("d3b7"),n("25f0");var s=function(t){t=Number(t);var e=Math.floor(t/3600),n=Math.floor(t%3600/60),s=Math.floor(t%3600%60),i=e>0?e+"h ":"",r=n>0?n+"min ":"",a=s>0?s+"sec":"",o=i+r+a;i=e>0?e.toString().padStart(2,"0")+":":"",r=n>0?n.toString().padStart(2,"0")+":":"",r=0==n?"00:":r,a=s>0?s.toString().padStart(2,"0"):"00";var c=i+r+a;return{hours:e,minutes:n,seconds:s,timeStr:o,timeNum:c}}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var s=n("1d80"),i=n("577e"),r=n("5899"),a="["+r+"]",o=RegExp("^"+a+a+"*"),c=RegExp(a+a+"*$"),u=function(t){return function(e){var n=i(s(e));return 1&t&&(n=n.replace(o,"")),2&t&&(n=n.replace(c,"")),n}};t.exports={start:u(1),end:u(2),trim:u(3)}},"5c3d":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),i=n("9dd0"),r=a(i);function a(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c={nFrequencyBars:255,onAnalysed:null},u=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),this.config=Object.assign({},c,n),this.audioContext=e,this.audioInput=null,this.realAudioInput=null,this.inputPoint=null,this.audioRecorder=null,this.rafID=null,this.analyserContext=null,this.recIndex=0,this.stream=null,this.updateAnalysers=this.updateAnalysers.bind(this)}return s(t,[{key:"init",value:function(t){var e=this;return new Promise((function(n){e.inputPoint=e.audioContext.createGain(),e.stream=t,e.realAudioInput=e.audioContext.createMediaStreamSource(t),e.audioInput=e.realAudioInput,e.audioInput.connect(e.inputPoint),e.analyserNode=e.audioContext.createAnalyser(),e.analyserNode.fftSize=2048,e.inputPoint.connect(e.analyserNode),e.audioRecorder=new r.default(e.inputPoint);var s=e.audioContext.createGain();s.gain.value=0,e.inputPoint.connect(s),s.connect(e.audioContext.destination),e.updateAnalysers(),n()}))}},{key:"start",value:function(){var t=this;return new Promise((function(e,n){t.audioRecorder?(t.audioRecorder.clear(),t.audioRecorder.record(),e(t.stream)):n("Not currently recording")}))}},{key:"stop",value:function(){var t=this;return new Promise((function(e){t.audioRecorder.stop(),t.audioRecorder.getBuffer((function(n){t.audioRecorder.exportWAV((function(t){return e({buffer:n,blob:t})}))}))}))}},{key:"updateAnalysers",value:function(){if(this.config.onAnalysed){requestAnimationFrame(this.updateAnalysers);var t=new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.getByteFrequencyData(t);for(var e=new Array(255),n=0,s=void 0,i=0;i<255;i+=1)s=Math.floor(t[i])-Math.floor(t[i])%5,0!==s&&(n=i),e[i]=s;this.config.onAnalysed({data:e,lineTo:n})}}},{key:"setOnAnalysed",value:function(t){this.config.onAnalysed=t}}]),t}();u.download=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"audio";r.default.forceDownload(t,e+".wav")},e.default=u},7156:function(t,e,n){var s=n("861d"),i=n("d2bb");t.exports=function(t,e,n){var r,a;return i&&"function"==typeof(r=e.constructor)&&r!==n&&s(a=r.prototype)&&a!==n.prototype&&i(t,a),t}},"78fe":function(t,e,n){(function(e){var n=!!(e===e.window&&e.URL&&e.Blob&&e.Worker);function s(t,s){var i,r=this;if(s=s||{},n)return i=t.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],new e.Worker(e.URL.createObjectURL(new e.Blob([i],{type:"text/javascript"})));function a(t){setTimeout((function(){r.onmessage({data:t})}),0)}this.self=s,this.self.postMessage=a,setTimeout(t.bind(s,s),0)}s.prototype.postMessage=function(t){var e=this;setTimeout((function(){e.self.onmessage({data:t})}),0)},t.exports=s}).call(this,n("c8ba"))},"81d5":function(t,e,n){"use strict";var s=n("7b0b"),i=n("23cb"),r=n("50c4");t.exports=function(t){var e=s(this),n=r(e.length),a=arguments.length,o=i(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,u=void 0===c?n:i(c,n);while(u>o)e[o++]=t;return e}},"97f2":function(t,e,n){},"9a0c":function(t,e,n){var s=n("342f");t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(s)},"9dd0":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),i=n("78fe"),r=a(i);function a(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c={bufferLen:4096,numChannels:2,mimeType:"audio/wav"},u=function(){function t(e,n){var s=this;o(this,t),this.config=Object.assign({},c,n),this.recording=!1,this.callbacks={getBuffer:[],exportWAV:[]},this.context=e.context,this.node=(this.context.createScriptProcessor||this.context.createJavaScriptNode).call(this.context,this.config.bufferLen,this.config.numChannels,this.config.numChannels),this.node.onaudioprocess=function(t){if(s.recording){for(var e=[],n=0;n<s.config.numChannels;n++)e.push(t.inputBuffer.getChannelData(n));s.worker.postMessage({command:"record",buffer:e})}},e.connect(this.node),this.node.connect(this.context.destination);var i={};this.worker=new r.default((function(){var t=0,e=[],n=void 0,s=void 0;function i(t){n=t.sampleRate,s=t.numChannels,u()}function r(n){for(var i=0;i<s;i++)e[i].push(n[i]);t+=n[0].length}function a(n){for(var i=[],r=0;r<s;r++)i.push(l(e[r],t));var a=void 0;a=2===s?d(i[0],i[1]):i[0];var o=p(a),c=new Blob([o],{type:n});this.postMessage({command:"exportWAV",data:c})}function o(){for(var n=[],i=0;i<s;i++)n.push(l(e[i],t));this.postMessage({command:"getBuffer",data:n})}function c(){t=0,e=[],u()}function u(){for(var t=0;t<s;t++)e[t]=[]}function l(t,e){for(var n=new Float32Array(e),s=0,i=0;i<t.length;i++)n.set(t[i],s),s+=t[i].length;return n}function d(t,e){var n=t.length+e.length,s=new Float32Array(n),i=0,r=0;while(i<n)s[i++]=t[r],s[i++]=e[r],r++;return s}function f(t,e,n){for(var s=0;s<n.length;s++,e+=2){var i=Math.max(-1,Math.min(1,n[s]));t.setInt16(e,i<0?32768*i:32767*i,!0)}}function h(t,e,n){for(var s=0;s<n.length;s+=1)t.setUint8(e+s,n.charCodeAt(s))}function p(t){var e=new ArrayBuffer(44+2*t.length),i=new DataView(e);return h(i,0,"RIFF"),i.setUint32(4,36+2*t.length,!0),h(i,8,"WAVE"),h(i,12,"fmt "),i.setUint32(16,16,!0),i.setUint16(20,1,!0),i.setUint16(22,s,!0),i.setUint32(24,n,!0),i.setUint32(28,4*n,!0),i.setUint16(32,2*s,!0),i.setUint16(34,16,!0),h(i,36,"data"),i.setUint32(40,2*t.length,!0),f(i,44,t),i}this.onmessage=function(t){switch(t.data.command){case"init":i(t.data.config);break;case"record":r(t.data.buffer);break;case"exportWAV":a(t.data.type);break;case"getBuffer":o();break;case"clear":c();break}}}),i),this.worker.postMessage({command:"init",config:{sampleRate:this.context.sampleRate,numChannels:this.config.numChannels}}),this.worker.onmessage=function(t){var e=s.callbacks[t.data.command].pop();"function"===typeof e&&e(t.data.data)}}return s(t,[{key:"record",value:function(){this.recording=!0}},{key:"stop",value:function(){this.recording=!1}},{key:"clear",value:function(){this.worker.postMessage({command:"clear"})}},{key:"getBuffer",value:function(t){if(t=t||this.config.callback,!t)throw new Error("Callback not set");this.callbacks.getBuffer.push(t),this.worker.postMessage({command:"getBuffer"})}},{key:"exportWAV",value:function(t,e){if(e=e||this.config.mimeType,t=t||this.config.callback,!t)throw new Error("Callback not set");this.callbacks.exportWAV.push(t),this.worker.postMessage({command:"exportWAV",type:e})}}]),t}();u.forceDownload=function(t,e){var n=document.createElement("a");n.style="display: none",document.body.appendChild(n);var s=window.URL.createObjectURL(t);n.href=s,n.download=e,n.click(),window.URL.revokeObjectURL(s),document.body.removeChild(n)},e.default=u},a9e3:function(t,e,n){"use strict";var s=n("83ab"),i=n("da84"),r=n("94ca"),a=n("6eeb"),o=n("5135"),c=n("c6b6"),u=n("7156"),l=n("d9b5"),d=n("c04e"),f=n("d039"),h=n("7c73"),p=n("241c").f,v=n("06cf").f,b=n("9bf2").f,m=n("58a8").trim,g="Number",w=i[g],x=w.prototype,C=c(h(x))==g,y=function(t){if(l(t))throw TypeError("Cannot convert a Symbol value to a number");var e,n,s,i,r,a,o,c,u=d(t,"number");if("string"==typeof u&&u.length>2)if(u=m(u),e=u.charCodeAt(0),43===e||45===e){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:s=2,i=49;break;case 79:case 111:s=8,i=55;break;default:return+u}for(r=u.slice(2),a=r.length,o=0;o<a;o++)if(c=r.charCodeAt(o),c<48||c>i)return NaN;return parseInt(r,s)}return+u};if(r(g,!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var _,k=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof k&&(C?f((function(){x.valueOf.call(n)})):c(n)!=g)?u(new w(y(e)),n,k):y(e)},q=s?p(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),A=0;q.length>A;A++)o(w,_=q[A])&&!o(k,_)&&b(k,_,v(w,_));k.prototype=x,x.constructor=k,a(i,g,k)}},be80:function(t,e,n){"use strict";n("97f2")},c782:function(t,e,n){t.exports=n("5c3d")},cb29:function(t,e,n){var s=n("23e7"),i=n("81d5"),r=n("44d2");s({target:"Array",proto:!0},{fill:i}),r("fill")},d371:function(t,e,n){}}]);
//# sourceMappingURL=Course.c3f407c1.js.map